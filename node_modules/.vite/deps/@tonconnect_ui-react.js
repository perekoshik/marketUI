import {
  BadRequestError,
  BrowserEventDispatcher,
  CHAIN,
  CONNECT_EVENT_ERROR_CODES,
  CONNECT_ITEM_ERROR_CODES,
  FetchWalletsError,
  LocalstorageNotFoundError,
  ParseHexError,
  SEND_TRANSACTION_ERROR_CODES,
  SIGN_DATA_ERROR_CODES,
  SessionCrypto,
  THEME,
  TonConnect,
  TonConnectError,
  TonConnectUI,
  TonConnectUIError,
  UnknownAppError,
  UnknownError,
  UserRejectsError,
  WalletAlreadyConnectedError,
  WalletMissingRequiredFeaturesError,
  WalletNotConnectedError,
  WalletNotInjectedError,
  WalletNotSupportFeatureError,
  WalletsListManager,
  WrongAddressError,
  checkRequiredWalletFeatures,
  createConnectionCompletedEvent,
  createConnectionErrorEvent,
  createConnectionRestoringCompletedEvent,
  createConnectionRestoringErrorEvent,
  createConnectionRestoringStartedEvent,
  createConnectionStartedEvent,
  createDataSentForSignatureEvent,
  createDataSignedEvent,
  createDataSigningFailedEvent,
  createDisconnectionEvent,
  createRequestVersionEvent,
  createResponseVersionEvent,
  createTransactionSentForSignatureEvent,
  createTransactionSignedEvent,
  createTransactionSigningFailedEvent,
  createVersionInfo,
  enableQaMode,
  encodeTelegramUrlParameters,
  isQaModeEnabled,
  isTelegramUrl,
  isWalletInfoCurrentlyEmbedded,
  isWalletInfoCurrentlyInjected,
  isWalletInfoInjectable,
  isWalletInfoInjected,
  isWalletInfoRemote,
  toUserFriendlyAddress
} from "./chunk-SGAAUVQH.js";
import {
  require_jsx_runtime
} from "./chunk-7CC4PDZ5.js";
import {
  require_react
} from "./chunk-YHPANKLD.js";
import {
  __toESM
} from "./chunk-PR4QN5HX.js";

// node_modules/@tonconnect/ui-react/lib/index.mjs
var import_jsx_runtime = __toESM(require_jsx_runtime(), 1);
var import_react = __toESM(require_react(), 1);
var __defProp = Object.defineProperty;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __objRest = (source, exclude) => {
  var target = {};
  for (var prop in source)
    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)
      target[prop] = source[prop];
  if (source != null && __getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(source)) {
      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))
        target[prop] = source[prop];
    }
  return target;
};
function isClientSide() {
  return typeof window !== "undefined";
}
function isServerSide() {
  return !isClientSide();
}
var TonConnectUIContext = (0, import_react.createContext)(null);
var tonConnectUI = null;
var TonConnectUIProvider = (_a) => {
  var _b = _a, {
    children
  } = _b, options = __objRest(_b, [
    "children"
  ]);
  if (isClientSide() && !tonConnectUI) {
    tonConnectUI = new TonConnectUI(options);
  }
  return (0, import_jsx_runtime.jsx)(TonConnectUIContext.Provider, { value: tonConnectUI, children });
};
var TonConnectUIProvider$1 = (0, import_react.memo)(TonConnectUIProvider);
var TonConnectUIReactError = class _TonConnectUIReactError extends TonConnectUIError {
  constructor(...args) {
    super(...args);
    Object.setPrototypeOf(this, _TonConnectUIReactError.prototype);
  }
};
var TonConnectProviderNotSetError = class _TonConnectProviderNotSetError extends TonConnectUIReactError {
  constructor(...args) {
    super(...args);
    Object.setPrototypeOf(this, _TonConnectProviderNotSetError.prototype);
  }
};
function checkProvider(provider) {
  if (!provider) {
    throw new TonConnectProviderNotSetError(
      "You should add <TonConnectUIProvider> on the top of the app to use TonConnect"
    );
  }
  return true;
}
function useTonConnectUI() {
  const tonConnectUI2 = (0, import_react.useContext)(TonConnectUIContext);
  const setOptions = (0, import_react.useCallback)(
    (options) => {
      if (tonConnectUI2) {
        tonConnectUI2.uiOptions = options;
      }
    },
    [tonConnectUI2]
  );
  if (isServerSide()) {
    return [null, () => {
    }];
  }
  checkProvider(tonConnectUI2);
  return [tonConnectUI2, setOptions];
}
var buttonRootId = "ton-connect-button";
var TonConnectButton = ({ className, style }) => {
  const [_, setOptions] = useTonConnectUI();
  (0, import_react.useEffect)(() => {
    setOptions({ buttonRootId });
    return () => setOptions({ buttonRootId: null });
  }, [setOptions]);
  return (0, import_jsx_runtime.jsx)(
    "div",
    {
      id: buttonRootId,
      className,
      style: __spreadValues({ width: "fit-content" }, style)
    }
  );
};
var TonConnectButton$1 = (0, import_react.memo)(TonConnectButton);
function useTonWallet() {
  const [tonConnectUI2] = useTonConnectUI();
  const [wallet, setWallet] = (0, import_react.useState)(
    (tonConnectUI2 == null ? void 0 : tonConnectUI2.wallet) || null
  );
  (0, import_react.useEffect)(() => {
    if (tonConnectUI2) {
      setWallet(tonConnectUI2.wallet);
      return tonConnectUI2.onStatusChange((value) => {
        setWallet(value);
      });
    }
  }, [tonConnectUI2]);
  return wallet;
}
function useTonAddress(userFriendly = true) {
  const wallet = useTonWallet();
  return (0, import_react.useMemo)(() => {
    if (wallet) {
      return userFriendly ? toUserFriendlyAddress(
        wallet.account.address,
        wallet.account.chain === CHAIN.TESTNET
      ) : wallet.account.address;
    } else {
      return "";
    }
  }, [wallet, userFriendly, wallet == null ? void 0 : wallet.account.address, wallet == null ? void 0 : wallet.account.chain]);
}
function useTonConnectModal() {
  const [tonConnectUI2] = useTonConnectUI();
  const [state, setState] = (0, import_react.useState)((tonConnectUI2 == null ? void 0 : tonConnectUI2.modal.state) || null);
  (0, import_react.useEffect)(() => {
    if (tonConnectUI2) {
      setState(tonConnectUI2.modal.state);
      return tonConnectUI2.onModalStateChange((value) => {
        setState(value);
      });
    }
  }, [tonConnectUI2]);
  return {
    state,
    open: () => tonConnectUI2 == null ? void 0 : tonConnectUI2.modal.open(),
    close: () => tonConnectUI2 == null ? void 0 : tonConnectUI2.modal.close()
  };
}
function useIsConnectionRestored() {
  const [restored, setRestored] = (0, import_react.useState)(false);
  const [tonConnectUI2] = useTonConnectUI();
  (0, import_react.useEffect)(() => {
    if (tonConnectUI2) {
      tonConnectUI2.connectionRestored.then(() => setRestored(true));
    }
  }, [tonConnectUI2]);
  return restored;
}
export {
  BadRequestError,
  BrowserEventDispatcher,
  CHAIN,
  CONNECT_EVENT_ERROR_CODES,
  CONNECT_ITEM_ERROR_CODES,
  FetchWalletsError,
  LocalstorageNotFoundError,
  ParseHexError,
  SEND_TRANSACTION_ERROR_CODES,
  SIGN_DATA_ERROR_CODES,
  SessionCrypto,
  THEME,
  TonConnect,
  TonConnectButton$1 as TonConnectButton,
  TonConnectError,
  TonConnectProviderNotSetError,
  TonConnectUI,
  TonConnectUIContext,
  TonConnectUIError,
  TonConnectUIProvider$1 as TonConnectUIProvider,
  TonConnectUIReactError,
  UnknownAppError,
  UnknownError,
  UserRejectsError,
  WalletAlreadyConnectedError,
  WalletMissingRequiredFeaturesError,
  WalletNotConnectedError,
  WalletNotInjectedError,
  WalletNotSupportFeatureError,
  WalletsListManager,
  WrongAddressError,
  checkRequiredWalletFeatures,
  createConnectionCompletedEvent,
  createConnectionErrorEvent,
  createConnectionRestoringCompletedEvent,
  createConnectionRestoringErrorEvent,
  createConnectionRestoringStartedEvent,
  createConnectionStartedEvent,
  createDataSentForSignatureEvent,
  createDataSignedEvent,
  createDataSigningFailedEvent,
  createDisconnectionEvent,
  createRequestVersionEvent,
  createResponseVersionEvent,
  createTransactionSentForSignatureEvent,
  createTransactionSignedEvent,
  createTransactionSigningFailedEvent,
  createVersionInfo,
  enableQaMode,
  encodeTelegramUrlParameters,
  isQaModeEnabled,
  isTelegramUrl,
  isWalletInfoCurrentlyEmbedded,
  isWalletInfoCurrentlyInjected,
  isWalletInfoInjectable,
  isWalletInfoInjected,
  isWalletInfoRemote,
  toUserFriendlyAddress,
  useIsConnectionRestored,
  useTonAddress,
  useTonConnectModal,
  useTonConnectUI,
  useTonWallet
};
//# sourceMappingURL=@tonconnect_ui-react.js.map
