{
  "version": 3,
  "sources": ["../../@twa-dev/sdk/src/telegram-web-apps.js", "../../@twa-dev/sdk/src/sdk.ts", "../../@twa-dev/sdk/src/index.ts"],
  "sourcesContent": ["// WebView\r\n(function () {\r\n  var eventHandlers = {};\r\n\r\n  var locationHash = '';\r\n  try {\r\n    locationHash = location.hash.toString();\r\n  } catch (e) {}\r\n\r\n  var initParams = urlParseHashParams(locationHash);\r\n  var storedParams = sessionStorageGet('initParams');\r\n  if (storedParams) {\r\n    for (var key in storedParams) {\r\n      if (typeof initParams[key] === 'undefined') {\r\n        initParams[key] = storedParams[key];\r\n      }\r\n    }\r\n  }\r\n  sessionStorageSet('initParams', initParams);\r\n\r\n  var isIframe = false, iFrameStyle;\r\n  try {\r\n    isIframe = (window.parent != null && window != window.parent);\r\n    if (isIframe) {\r\n      window.addEventListener('message', function (event) {\r\n        if (event.source !== window.parent) return;\r\n        try {\r\n          var dataParsed = JSON.parse(event.data);\r\n        } catch (e) {\r\n          return;\r\n        }\r\n        if (!dataParsed || !dataParsed.eventType) {\r\n          return;\r\n        }\r\n        if (dataParsed.eventType == 'set_custom_style') {\r\n          if (event.origin === 'https://web.telegram.org') {\r\n            iFrameStyle.innerHTML = dataParsed.eventData;\r\n          }\r\n        } else if (dataParsed.eventType == 'reload_iframe') {\r\n          try {\r\n            window.parent.postMessage(JSON.stringify({eventType: 'iframe_will_reload'}), '*');\r\n          } catch (e) {}\r\n          location.reload();\r\n        } else {\r\n          receiveEvent(dataParsed.eventType, dataParsed.eventData);\r\n        }\r\n      });\r\n      iFrameStyle = document.createElement('style');\r\n      document.head.appendChild(iFrameStyle);\r\n      try {\r\n        window.parent.postMessage(JSON.stringify({eventType: 'iframe_ready', eventData: {reload_supported: true}}), '*');\r\n      } catch (e) {}\r\n    }\r\n  } catch (e) {}\r\n\r\n  function urlSafeDecode(urlencoded) {\r\n    try {\r\n      urlencoded = urlencoded.replace(/\\+/g, '%20');\r\n      return decodeURIComponent(urlencoded);\r\n    } catch (e) {\r\n      return urlencoded;\r\n    }\r\n  }\r\n\r\n  function urlParseHashParams(locationHash) {\r\n    locationHash = locationHash.replace(/^#/, '');\r\n    var params = {};\r\n    if (!locationHash.length) {\r\n      return params;\r\n    }\r\n    if (locationHash.indexOf('=') < 0 && locationHash.indexOf('?') < 0) {\r\n      params._path = urlSafeDecode(locationHash);\r\n      return params;\r\n    }\r\n    var qIndex = locationHash.indexOf('?');\r\n    if (qIndex >= 0) {\r\n      var pathParam = locationHash.substr(0, qIndex);\r\n      params._path = urlSafeDecode(pathParam);\r\n      locationHash = locationHash.substr(qIndex + 1);\r\n    }\r\n    var query_params = urlParseQueryString(locationHash);\r\n    for (var k in query_params) {\r\n      params[k] = query_params[k];\r\n    }\r\n    return params;\r\n  }\r\n\r\n  function urlParseQueryString(queryString) {\r\n    var params = {};\r\n    if (!queryString.length) {\r\n      return params;\r\n    }\r\n    var queryStringParams = queryString.split('&');\r\n    var i, param, paramName, paramValue;\r\n    for (i = 0; i < queryStringParams.length; i++) {\r\n      param = queryStringParams[i].split('=');\r\n      paramName = urlSafeDecode(param[0]);\r\n      paramValue = param[1] == null ? null : urlSafeDecode(param[1]);\r\n      params[paramName] = paramValue;\r\n    }\r\n    return params;\r\n  }\r\n\r\n  // Telegram apps will implement this logic to add service params (e.g. tgShareScoreUrl) to game URL\r\n  function urlAppendHashParams(url, addHash) {\r\n    // url looks like 'https://game.com/path?query=1#hash'\r\n    // addHash looks like 'tgShareScoreUrl=' + encodeURIComponent('tgb://share_game_score?hash=very_long_hash123')\r\n\r\n    var ind = url.indexOf('#');\r\n    if (ind < 0) {\r\n      // https://game.com/path -> https://game.com/path#tgShareScoreUrl=etc\r\n      return url + '#' + addHash;\r\n    }\r\n    var curHash = url.substr(ind + 1);\r\n    if (curHash.indexOf('=') >= 0 || curHash.indexOf('?') >= 0) {\r\n      // https://game.com/#hash=1 -> https://game.com/#hash=1&tgShareScoreUrl=etc\r\n      // https://game.com/#path?query -> https://game.com/#path?query&tgShareScoreUrl=etc\r\n      return url + '&' + addHash;\r\n    }\r\n    // https://game.com/#hash -> https://game.com/#hash?tgShareScoreUrl=etc\r\n    if (curHash.length > 0) {\r\n      return url + '?' + addHash;\r\n    }\r\n    // https://game.com/# -> https://game.com/#tgShareScoreUrl=etc\r\n    return url + addHash;\r\n  }\r\n\r\n  function postEvent(eventType, callback, eventData) {\r\n    if (!callback) {\r\n      callback = function () {};\r\n    }\r\n    if (eventData === undefined) {\r\n      eventData = '';\r\n    }\r\n    console.log('[Telegram.WebView] > postEvent', eventType, eventData);\r\n\r\n    if (window.TelegramWebviewProxy !== undefined) {\r\n      TelegramWebviewProxy.postEvent(eventType, JSON.stringify(eventData));\r\n      callback();\r\n    }\r\n    else if (window.external && 'notify' in window.external) {\r\n      window.external.notify(JSON.stringify({eventType: eventType, eventData: eventData}));\r\n      callback();\r\n    }\r\n    else if (isIframe) {\r\n      try {\r\n        var trustedTarget = 'https://web.telegram.org';\r\n        // For now we don't restrict target, for testing purposes\r\n        trustedTarget = '*';\r\n        window.parent.postMessage(JSON.stringify({eventType: eventType, eventData: eventData}), trustedTarget);\r\n        callback();\r\n      } catch (e) {\r\n        callback(e);\r\n      }\r\n    }\r\n    else {\r\n      callback({notAvailable: true});\r\n    }\r\n  };\r\n\r\n  function receiveEvent(eventType, eventData) {\r\n    console.log('[Telegram.WebView] < receiveEvent', eventType, eventData);\r\n    callEventCallbacks(eventType, function(callback) {\r\n      callback(eventType, eventData);\r\n    });\r\n  }\r\n\r\n  function callEventCallbacks(eventType, func) {\r\n    var curEventHandlers = eventHandlers[eventType];\r\n    if (curEventHandlers === undefined ||\r\n        !curEventHandlers.length) {\r\n      return;\r\n    }\r\n    for (var i = 0; i < curEventHandlers.length; i++) {\r\n      try {\r\n        func(curEventHandlers[i]);\r\n      } catch (e) {}\r\n    }\r\n  }\r\n\r\n  function onEvent(eventType, callback) {\r\n    if (eventHandlers[eventType] === undefined) {\r\n      eventHandlers[eventType] = [];\r\n    }\r\n    var index = eventHandlers[eventType].indexOf(callback);\r\n    if (index === -1) {\r\n      eventHandlers[eventType].push(callback);\r\n    }\r\n  };\r\n\r\n  function offEvent(eventType, callback) {\r\n    if (eventHandlers[eventType] === undefined) {\r\n      return;\r\n    }\r\n    var index = eventHandlers[eventType].indexOf(callback);\r\n    if (index === -1) {\r\n      return;\r\n    }\r\n    eventHandlers[eventType].splice(index, 1);\r\n  };\r\n\r\n  function openProtoUrl(url) {\r\n    if (!url.match(/^(web\\+)?tgb?:\\/\\/./)) {\r\n      return false;\r\n    }\r\n    var useIframe = navigator.userAgent.match(/iOS|iPhone OS|iPhone|iPod|iPad/i) ? true : false;\r\n    if (useIframe) {\r\n      var iframeContEl = document.getElementById('tgme_frame_cont') || document.body;\r\n      var iframeEl = document.createElement('iframe');\r\n      iframeContEl.appendChild(iframeEl);\r\n      var pageHidden = false;\r\n      var enableHidden = function () {\r\n        pageHidden = true;\r\n      };\r\n      window.addEventListener('pagehide', enableHidden, false);\r\n      window.addEventListener('blur', enableHidden, false);\r\n      if (iframeEl !== null) {\r\n        iframeEl.src = url;\r\n      }\r\n      setTimeout(function() {\r\n        if (!pageHidden) {\r\n          window.location = url;\r\n        }\r\n        window.removeEventListener('pagehide', enableHidden, false);\r\n        window.removeEventListener('blur', enableHidden, false);\r\n      }, 2000);\r\n    }\r\n    else {\r\n      window.location = url;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  function sessionStorageSet(key, value) {\r\n    try {\r\n      window.sessionStorage.setItem('__telegram__' + key, JSON.stringify(value));\r\n      return true;\r\n    } catch(e) {}\r\n    return false;\r\n  }\r\n  function sessionStorageGet(key) {\r\n    try {\r\n      return JSON.parse(window.sessionStorage.getItem('__telegram__' + key));\r\n    } catch(e) {}\r\n    return null;\r\n  }\r\n\r\n  if (!window.Telegram) {\r\n    window.Telegram = {};\r\n  }\r\n  window.Telegram.WebView = {\r\n    initParams: initParams,\r\n    isIframe: isIframe,\r\n    onEvent: onEvent,\r\n    offEvent: offEvent,\r\n    postEvent: postEvent,\r\n    receiveEvent: receiveEvent,\r\n    callEventCallbacks: callEventCallbacks\r\n  };\r\n\r\n  window.Telegram.Utils = {\r\n    urlSafeDecode: urlSafeDecode,\r\n    urlParseQueryString: urlParseQueryString,\r\n    urlParseHashParams: urlParseHashParams,\r\n    urlAppendHashParams: urlAppendHashParams,\r\n    sessionStorageSet: sessionStorageSet,\r\n    sessionStorageGet: sessionStorageGet\r\n  };\r\n\r\n  // For Windows Phone app\r\n  window.TelegramGameProxy_receiveEvent = receiveEvent;\r\n\r\n  // App backward compatibility\r\n  window.TelegramGameProxy = {\r\n    receiveEvent: receiveEvent\r\n  };\r\n})();\r\n\r\n// WebApp\r\n(function () {\r\n  var Utils = window.Telegram.Utils;\r\n  var WebView = window.Telegram.WebView;\r\n  var initParams = WebView.initParams;\r\n  var isIframe = WebView.isIframe;\r\n\r\n  var WebApp = {};\r\n  var webAppInitData = '', webAppInitDataUnsafe = {};\r\n  var themeParams = {}, colorScheme = 'light';\r\n  var webAppVersion = '6.0';\r\n  var webAppPlatform = 'unknown';\r\n  var webAppIsActive = true;\r\n  var webAppIsFullscreen = false;\r\n  var webAppIsOrientationLocked = false;\r\n  var webAppBackgroundColor = 'bg_color';\r\n  var webAppHeaderColorKey = 'bg_color';\r\n  var webAppHeaderColor = null;\r\n\r\n  if (initParams.tgWebAppData && initParams.tgWebAppData.length) {\r\n    webAppInitData = initParams.tgWebAppData;\r\n    webAppInitDataUnsafe = Utils.urlParseQueryString(webAppInitData);\r\n    for (var key in webAppInitDataUnsafe) {\r\n      var val = webAppInitDataUnsafe[key];\r\n      try {\r\n        if (val.substr(0, 1) == '{' && val.substr(-1) == '}' ||\r\n            val.substr(0, 1) == '[' && val.substr(-1) == ']') {\r\n          webAppInitDataUnsafe[key] = JSON.parse(val);\r\n        }\r\n      } catch (e) {}\r\n    }\r\n  }\r\n  var stored_theme_params = Utils.sessionStorageGet('themeParams');\r\n  if (initParams.tgWebAppThemeParams && initParams.tgWebAppThemeParams.length) {\r\n    var themeParamsRaw = initParams.tgWebAppThemeParams;\r\n    try {\r\n      var theme_params = JSON.parse(themeParamsRaw);\r\n      if (theme_params) {\r\n        setThemeParams(theme_params);\r\n      }\r\n    } catch (e) {}\r\n  }\r\n  if (stored_theme_params) {\r\n    setThemeParams(stored_theme_params);\r\n  }\r\n  var stored_def_colors = Utils.sessionStorageGet('defaultColors');\r\n  if (initParams.tgWebAppDefaultColors && initParams.tgWebAppDefaultColors.length) {\r\n    var defColorsRaw = initParams.tgWebAppDefaultColors;\r\n    try {\r\n      var def_colors = JSON.parse(defColorsRaw);\r\n      if (def_colors) {\r\n        setDefaultColors(def_colors);\r\n      }\r\n    } catch (e) {}\r\n  }\r\n  if (stored_def_colors) {\r\n    setDefaultColors(stored_def_colors);\r\n  }\r\n  if (initParams.tgWebAppVersion) {\r\n    webAppVersion = initParams.tgWebAppVersion;\r\n  }\r\n  if (initParams.tgWebAppPlatform) {\r\n    webAppPlatform = initParams.tgWebAppPlatform;\r\n  }\r\n\r\n  var stored_fullscreen = Utils.sessionStorageGet('isFullscreen');\r\n  if (initParams.tgWebAppFullscreen) {\r\n    setFullscreen(true);\r\n  }\r\n  if (stored_fullscreen) {\r\n    setFullscreen(stored_fullscreen == 'yes');\r\n  }\r\n\r\n  var stored_orientation_lock = Utils.sessionStorageGet('isOrientationLocked');\r\n  if (stored_orientation_lock) {\r\n    setOrientationLock(stored_orientation_lock == 'yes');\r\n  }\r\n\r\n  function onThemeChanged(eventType, eventData) {\r\n    if (eventData.theme_params) {\r\n      setThemeParams(eventData.theme_params);\r\n      window.Telegram.WebApp.MainButton.setParams({});\r\n      window.Telegram.WebApp.SecondaryButton.setParams({});\r\n      updateHeaderColor();\r\n      updateBackgroundColor();\r\n      updateBottomBarColor();\r\n      receiveWebViewEvent('themeChanged');\r\n    }\r\n  }\r\n\r\n  var lastWindowHeight = window.innerHeight;\r\n  function onViewportChanged(eventType, eventData) {\r\n    if (eventData.height) {\r\n      window.removeEventListener('resize', onWindowResize);\r\n      setViewportHeight(eventData);\r\n    }\r\n  }\r\n\r\n  function onWindowResize(e) {\r\n    if (lastWindowHeight != window.innerHeight) {\r\n      lastWindowHeight = window.innerHeight;\r\n      receiveWebViewEvent('viewportChanged', {\r\n        isStateStable: true\r\n      });\r\n    }\r\n  }\r\n\r\n  function onSafeAreaChanged(eventType, eventData) {\r\n    if (eventData) {\r\n      setSafeAreaInset(eventData);\r\n    }\r\n  }\r\n  function onContentSafeAreaChanged(eventType, eventData) {\r\n    if (eventData) {\r\n      setContentSafeAreaInset(eventData);\r\n    }\r\n  }\r\n\r\n  function onVisibilityChanged(eventType, eventData) {\r\n    if (eventData.is_visible) {\r\n      webAppIsActive = true;\r\n      receiveWebViewEvent('activated');\r\n    } else {\r\n      webAppIsActive = false;\r\n      receiveWebViewEvent('deactivated');\r\n    }\r\n  }\r\n\r\n  function linkHandler(e) {\r\n    if (e.metaKey || e.ctrlKey) return;\r\n    var el = e.target;\r\n    while (el.tagName != 'A' && el.parentNode) {\r\n      el = el.parentNode;\r\n    }\r\n    if (el.tagName == 'A' &&\r\n        el.target != '_blank' &&\r\n        (el.protocol == 'http:' || el.protocol == 'https:') &&\r\n        el.hostname == 't.me') {\r\n      WebApp.openTgLink(el.href);\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  function strTrim(str) {\r\n    return str.toString().replace(/^\\s+|\\s+$/g, '');\r\n  }\r\n\r\n  function receiveWebViewEvent(eventType) {\r\n    var args = Array.prototype.slice.call(arguments);\r\n    eventType = args.shift();\r\n    WebView.callEventCallbacks('webview:' + eventType, function(callback) {\r\n      callback.apply(WebApp, args);\r\n    });\r\n  }\r\n\r\n  function onWebViewEvent(eventType, callback) {\r\n    WebView.onEvent('webview:' + eventType, callback);\r\n  };\r\n\r\n  function offWebViewEvent(eventType, callback) {\r\n    WebView.offEvent('webview:' + eventType, callback);\r\n  };\r\n\r\n  function setCssProperty(name, value) {\r\n    var root = document.documentElement;\r\n    if (root && root.style && root.style.setProperty) {\r\n      root.style.setProperty('--tg-' + name, value);\r\n    }\r\n  }\r\n\r\n  function setFullscreen(is_fullscreen) {\r\n    webAppIsFullscreen = !!is_fullscreen;\r\n    Utils.sessionStorageSet('isFullscreen', webAppIsFullscreen ? 'yes' : 'no');\r\n  }\r\n\r\n  function setOrientationLock(is_locked) {\r\n    webAppIsOrientationLocked = !!is_locked;\r\n    Utils.sessionStorageSet('isOrientationLocked', webAppIsOrientationLocked ? 'yes' : 'no');\r\n  }\r\n\r\n  function setThemeParams(theme_params) {\r\n    // temp iOS fix\r\n    if (theme_params.bg_color == '#1c1c1d' &&\r\n        theme_params.bg_color == theme_params.secondary_bg_color) {\r\n      theme_params.secondary_bg_color = '#2c2c2e';\r\n    }\r\n    var color;\r\n    for (var key in theme_params) {\r\n      if (color = parseColorToHex(theme_params[key])) {\r\n        themeParams[key] = color;\r\n        if (key == 'bg_color') {\r\n          colorScheme = isColorDark(color) ? 'dark' : 'light'\r\n          setCssProperty('color-scheme', colorScheme);\r\n        }\r\n        key = 'theme-' + key.split('_').join('-');\r\n        setCssProperty(key, color);\r\n      }\r\n    }\r\n    Utils.sessionStorageSet('themeParams', themeParams);\r\n  }\r\n\r\n  function setDefaultColors(def_colors) {\r\n    if (colorScheme == 'dark') {\r\n      if (def_colors.bg_dark_color) {\r\n        webAppBackgroundColor = def_colors.bg_dark_color;\r\n      }\r\n      if (def_colors.header_dark_color) {\r\n        webAppHeaderColorKey = null;\r\n        webAppHeaderColor = def_colors.header_dark_color;\r\n      }\r\n    } else {\r\n      if (def_colors.bg_color) {\r\n        webAppBackgroundColor = def_colors.bg_color;\r\n      }\r\n      if (def_colors.header_color) {\r\n        webAppHeaderColorKey = null;\r\n        webAppHeaderColor = def_colors.header_color;\r\n      }\r\n    }\r\n    Utils.sessionStorageSet('defaultColors', def_colors);\r\n  }\r\n\r\n  var webAppCallbacks = {};\r\n  function generateCallbackId(len) {\r\n    var tries = 100;\r\n    while (--tries) {\r\n      var id = '', chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789', chars_len = chars.length;\r\n      for (var i = 0; i < len; i++) {\r\n        id += chars[Math.floor(Math.random() * chars_len)];\r\n      }\r\n      if (!webAppCallbacks[id]) {\r\n        webAppCallbacks[id] = {};\r\n        return id;\r\n      }\r\n    }\r\n    throw Error('WebAppCallbackIdGenerateFailed');\r\n  }\r\n\r\n  var viewportHeight = false, viewportStableHeight = false, isExpanded = true;\r\n  function setViewportHeight(data) {\r\n    if (typeof data !== 'undefined') {\r\n      isExpanded = !!data.is_expanded;\r\n      viewportHeight = data.height;\r\n      if (data.is_state_stable) {\r\n        viewportStableHeight = data.height;\r\n      }\r\n      receiveWebViewEvent('viewportChanged', {\r\n        isStateStable: !!data.is_state_stable\r\n      });\r\n    }\r\n    var height, stable_height;\r\n    if (viewportHeight !== false) {\r\n      height = (viewportHeight - bottomBarHeight) + 'px';\r\n    } else {\r\n      height = bottomBarHeight ? 'calc(100vh - ' + bottomBarHeight + 'px)' : '100vh';\r\n    }\r\n    if (viewportStableHeight !== false) {\r\n      stable_height = (viewportStableHeight - bottomBarHeight) + 'px';\r\n    } else {\r\n      stable_height = bottomBarHeight ? 'calc(100vh - ' + bottomBarHeight + 'px)' : '100vh';\r\n    }\r\n    setCssProperty('viewport-height', height);\r\n    setCssProperty('viewport-stable-height', stable_height);\r\n  }\r\n\r\n  var safeAreaInset = {top: 0, bottom: 0, left: 0, right: 0};\r\n  function setSafeAreaInset(data) {\r\n    if (typeof data !== 'undefined') {\r\n      if (typeof data.top !== 'undefined') {\r\n        safeAreaInset.top = data.top;\r\n      }\r\n      if (typeof data.bottom !== 'undefined') {\r\n        safeAreaInset.bottom = data.bottom;\r\n      }\r\n      if (typeof data.left !== 'undefined') {\r\n        safeAreaInset.left = data.left;\r\n      }\r\n      if (typeof data.right !== 'undefined') {\r\n        safeAreaInset.right = data.right;\r\n      }\r\n      receiveWebViewEvent('safeAreaChanged');\r\n    }\r\n    setCssProperty('safe-area-inset-top', safeAreaInset.top + 'px');\r\n    setCssProperty('safe-area-inset-bottom', safeAreaInset.bottom + 'px');\r\n    setCssProperty('safe-area-inset-left', safeAreaInset.left + 'px');\r\n    setCssProperty('safe-area-inset-right', safeAreaInset.right + 'px');\r\n  }\r\n\r\n  var contentSafeAreaInset = {top: 0, bottom: 0, left: 0, right: 0};\r\n  function setContentSafeAreaInset(data) {\r\n    if (typeof data !== 'undefined') {\r\n      if (typeof data.top !== 'undefined') {\r\n        contentSafeAreaInset.top = data.top;\r\n      }\r\n      if (typeof data.bottom !== 'undefined') {\r\n        contentSafeAreaInset.bottom = data.bottom;\r\n      }\r\n      if (typeof data.left !== 'undefined') {\r\n        contentSafeAreaInset.left = data.left;\r\n      }\r\n      if (typeof data.right !== 'undefined') {\r\n        contentSafeAreaInset.right = data.right;\r\n      }\r\n      receiveWebViewEvent('contentSafeAreaChanged');\r\n    }\r\n    setCssProperty('content-safe-area-inset-top', contentSafeAreaInset.top + 'px');\r\n    setCssProperty('content-safe-area-inset-bottom', contentSafeAreaInset.bottom + 'px');\r\n    setCssProperty('content-safe-area-inset-left', contentSafeAreaInset.left + 'px');\r\n    setCssProperty('content-safe-area-inset-right', contentSafeAreaInset.right + 'px');\r\n  }\r\n\r\n  var isClosingConfirmationEnabled = false;\r\n  function setClosingConfirmation(need_confirmation) {\r\n    if (!versionAtLeast('6.2')) {\r\n      console.warn('[Telegram.WebApp] Closing confirmation is not supported in version ' + webAppVersion);\r\n      return;\r\n    }\r\n    isClosingConfirmationEnabled = !!need_confirmation;\r\n    WebView.postEvent('web_app_setup_closing_behavior', false, {need_confirmation: isClosingConfirmationEnabled});\r\n  }\r\n\r\n  var isVerticalSwipesEnabled = true;\r\n  function toggleVerticalSwipes(enable_swipes) {\r\n    if (!versionAtLeast('7.7')) {\r\n      console.warn('[Telegram.WebApp] Changing swipes behavior is not supported in version ' + webAppVersion);\r\n      return;\r\n    }\r\n    isVerticalSwipesEnabled = !!enable_swipes;\r\n    WebView.postEvent('web_app_setup_swipe_behavior', false, {allow_vertical_swipe: isVerticalSwipesEnabled});\r\n  }\r\n\r\n  function onFullscreenChanged(eventType, eventData) {\r\n    setFullscreen(eventData.is_fullscreen);\r\n    receiveWebViewEvent('fullscreenChanged');\r\n  }\r\n  function onFullscreenFailed(eventType, eventData) {\r\n    if (eventData.error == 'ALREADY_FULLSCREEN' && !webAppIsFullscreen) {\r\n      setFullscreen(true);\r\n    }\r\n    receiveWebViewEvent('fullscreenFailed', {\r\n      error: eventData.error\r\n    });\r\n  }\r\n\r\n  function toggleOrientationLock(locked) {\r\n    if (!versionAtLeast('8.0')) {\r\n      console.warn('[Telegram.WebApp] Orientation locking is not supported in version ' + webAppVersion);\r\n      return;\r\n    }\r\n    setOrientationLock(locked);\r\n    WebView.postEvent('web_app_toggle_orientation_lock', false, {locked: webAppIsOrientationLocked});\r\n  }\r\n\r\n  var homeScreenCallbacks = [];\r\n  function onHomeScreenAdded(eventType, eventData) {\r\n    receiveWebViewEvent('homeScreenAdded');\r\n  }\r\n  function onHomeScreenChecked(eventType, eventData) {\r\n    var status = eventData.status || 'unknown';\r\n    if (homeScreenCallbacks.length > 0) {\r\n      for (var i = 0; i < homeScreenCallbacks.length; i++) {\r\n        var callback = homeScreenCallbacks[i];\r\n        callback(status);\r\n      }\r\n      homeScreenCallbacks = [];\r\n    }\r\n    receiveWebViewEvent('homeScreenChecked', {\r\n      status: status\r\n    });\r\n  }\r\n\r\n  var WebAppShareMessageOpened = false;\r\n  function onPreparedMessageSent(eventType, eventData) {\r\n    if (WebAppShareMessageOpened) {\r\n      var requestData = WebAppShareMessageOpened;\r\n      WebAppShareMessageOpened = false;\r\n      if (requestData.callback) {\r\n        requestData.callback(true);\r\n      }\r\n      receiveWebViewEvent('shareMessageSent');\r\n    }\r\n  }\r\n  function onPreparedMessageFailed(eventType, eventData) {\r\n    if (WebAppShareMessageOpened) {\r\n      var requestData = WebAppShareMessageOpened;\r\n      WebAppShareMessageOpened = false;\r\n      if (requestData.callback) {\r\n        requestData.callback(false);\r\n      }\r\n      receiveWebViewEvent('shareMessageFailed', {\r\n        error: eventData.error\r\n      });\r\n    }\r\n  }\r\n\r\n  var WebAppEmojiStatusRequested = false;\r\n  function onEmojiStatusSet(eventType, eventData) {\r\n    if (WebAppEmojiStatusRequested) {\r\n      var requestData = WebAppEmojiStatusRequested;\r\n      WebAppEmojiStatusRequested = false;\r\n      if (requestData.callback) {\r\n        requestData.callback(true);\r\n      }\r\n      receiveWebViewEvent('emojiStatusSet');\r\n    }\r\n  }\r\n  function onEmojiStatusFailed(eventType, eventData) {\r\n    if (WebAppEmojiStatusRequested) {\r\n      var requestData = WebAppEmojiStatusRequested;\r\n      WebAppEmojiStatusRequested = false;\r\n      if (requestData.callback) {\r\n        requestData.callback(false);\r\n      }\r\n      receiveWebViewEvent('emojiStatusFailed', {\r\n        error: eventData.error\r\n      });\r\n    }\r\n  }\r\n  var WebAppEmojiStatusAccessRequested = false;\r\n  function onEmojiStatusAccessRequested(eventType, eventData) {\r\n    if (WebAppEmojiStatusAccessRequested) {\r\n      var requestData = WebAppEmojiStatusAccessRequested;\r\n      WebAppEmojiStatusAccessRequested = false;\r\n      if (requestData.callback) {\r\n        requestData.callback(eventData.status == 'allowed');\r\n      }\r\n      receiveWebViewEvent('emojiStatusAccessRequested', {\r\n        status: eventData.status\r\n      });\r\n    }\r\n  }\r\n\r\n  var webAppPopupOpened = false;\r\n  function onPopupClosed(eventType, eventData) {\r\n    if (webAppPopupOpened) {\r\n      var popupData = webAppPopupOpened;\r\n      webAppPopupOpened = false;\r\n      var button_id = null;\r\n      if (typeof eventData.button_id !== 'undefined') {\r\n        button_id = eventData.button_id;\r\n      }\r\n      if (popupData.callback) {\r\n        popupData.callback(button_id);\r\n      }\r\n      receiveWebViewEvent('popupClosed', {\r\n        button_id: button_id\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  function getHeaderColor() {\r\n    if (webAppHeaderColorKey == 'secondary_bg_color') {\r\n      return themeParams.secondary_bg_color;\r\n    } else if (webAppHeaderColorKey == 'bg_color') {\r\n      return themeParams.bg_color;\r\n    }\r\n    return webAppHeaderColor;\r\n  }\r\n  function setHeaderColor(color) {\r\n    if (!versionAtLeast('6.1')) {\r\n      console.warn('[Telegram.WebApp] Header color is not supported in version ' + webAppVersion);\r\n      return;\r\n    }\r\n    if (!versionAtLeast('6.9')) {\r\n      if (themeParams.bg_color &&\r\n          themeParams.bg_color == color) {\r\n        color = 'bg_color';\r\n      } else if (themeParams.secondary_bg_color &&\r\n          themeParams.secondary_bg_color == color) {\r\n        color = 'secondary_bg_color';\r\n      }\r\n    }\r\n    var head_color = null, color_key = null;\r\n    if (color == 'bg_color' || color == 'secondary_bg_color') {\r\n      color_key = color;\r\n    } else if (versionAtLeast('6.9')) {\r\n      head_color = parseColorToHex(color);\r\n      if (!head_color) {\r\n        console.error('[Telegram.WebApp] Header color format is invalid', color);\r\n        throw Error('WebAppHeaderColorInvalid');\r\n      }\r\n    }\r\n    if (!versionAtLeast('6.9') &&\r\n        color_key != 'bg_color' &&\r\n        color_key != 'secondary_bg_color') {\r\n      console.error('[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, \\'bg_color\\', \\'secondary_bg_color\\'', color);\r\n      throw Error('WebAppHeaderColorKeyInvalid');\r\n    }\r\n    webAppHeaderColorKey = color_key;\r\n    webAppHeaderColor = head_color;\r\n    updateHeaderColor();\r\n  }\r\n  var appHeaderColorKey = null, appHeaderColor = null;\r\n  function updateHeaderColor() {\r\n    if (appHeaderColorKey != webAppHeaderColorKey ||\r\n        appHeaderColor != webAppHeaderColor) {\r\n      appHeaderColorKey = webAppHeaderColorKey;\r\n      appHeaderColor = webAppHeaderColor;\r\n      if (appHeaderColor) {\r\n        WebView.postEvent('web_app_set_header_color', false, {color: webAppHeaderColor});\r\n      } else {\r\n        WebView.postEvent('web_app_set_header_color', false, {color_key: webAppHeaderColorKey});\r\n      }\r\n    }\r\n  }\r\n\r\n  function getBackgroundColor() {\r\n    if (webAppBackgroundColor == 'secondary_bg_color') {\r\n      return themeParams.secondary_bg_color;\r\n    } else if (webAppBackgroundColor == 'bg_color') {\r\n      return themeParams.bg_color;\r\n    }\r\n    return webAppBackgroundColor;\r\n  }\r\n  function setBackgroundColor(color) {\r\n    if (!versionAtLeast('6.1')) {\r\n      console.warn('[Telegram.WebApp] Background color is not supported in version ' + webAppVersion);\r\n      return;\r\n    }\r\n    var bg_color;\r\n    if (color == 'bg_color' || color == 'secondary_bg_color') {\r\n      bg_color = color;\r\n    } else {\r\n      bg_color = parseColorToHex(color);\r\n      if (!bg_color) {\r\n        console.error('[Telegram.WebApp] Background color format is invalid', color);\r\n        throw Error('WebAppBackgroundColorInvalid');\r\n      }\r\n    }\r\n    webAppBackgroundColor = bg_color;\r\n    updateBackgroundColor();\r\n  }\r\n  var appBackgroundColor = null;\r\n  function updateBackgroundColor() {\r\n    var color = getBackgroundColor();\r\n    if (appBackgroundColor != color) {\r\n      appBackgroundColor = color;\r\n      WebView.postEvent('web_app_set_background_color', false, {color: color});\r\n    }\r\n  }\r\n\r\n  var bottomBarColor = 'bottom_bar_bg_color';\r\n  function getBottomBarColor() {\r\n    if (bottomBarColor == 'bottom_bar_bg_color') {\r\n      return themeParams.bottom_bar_bg_color || themeParams.secondary_bg_color || '#ffffff';\r\n    } else if (bottomBarColor == 'secondary_bg_color') {\r\n      return themeParams.secondary_bg_color;\r\n    } else if (bottomBarColor == 'bg_color') {\r\n      return themeParams.bg_color;\r\n    }\r\n    return bottomBarColor;\r\n  }\r\n  function setBottomBarColor(color) {\r\n    if (!versionAtLeast('7.10')) {\r\n      console.warn('[Telegram.WebApp] Bottom bar color is not supported in version ' + webAppVersion);\r\n      return;\r\n    }\r\n    var bg_color;\r\n    if (color == 'bg_color' || color == 'secondary_bg_color' || color == 'bottom_bar_bg_color') {\r\n      bg_color = color;\r\n    } else {\r\n      bg_color = parseColorToHex(color);\r\n      if (!bg_color) {\r\n        console.error('[Telegram.WebApp] Bottom bar color format is invalid', color);\r\n        throw Error('WebAppBottomBarColorInvalid');\r\n      }\r\n    }\r\n    bottomBarColor = bg_color;\r\n    updateBottomBarColor();\r\n    window.Telegram.WebApp.SecondaryButton.setParams({});\r\n  }\r\n  var appBottomBarColor = null;\r\n  function updateBottomBarColor() {\r\n    var color = getBottomBarColor();\r\n    if (appBottomBarColor != color) {\r\n      appBottomBarColor = color;\r\n      WebView.postEvent('web_app_set_bottom_bar_color', false, {color: color});\r\n    }\r\n    if (initParams.tgWebAppDebug) {\r\n      updateDebugBottomBar();\r\n    }\r\n  }\r\n\r\n\r\n  function parseColorToHex(color) {\r\n    color += '';\r\n    var match;\r\n    if (match = /^\\s*#([0-9a-f]{6})\\s*$/i.exec(color)) {\r\n      return '#' + match[1].toLowerCase();\r\n    }\r\n    else if (match = /^\\s*#([0-9a-f])([0-9a-f])([0-9a-f])\\s*$/i.exec(color)) {\r\n      return ('#' + match[1] + match[1] + match[2] + match[2] + match[3] + match[3]).toLowerCase();\r\n    }\r\n    else if (match = /^\\s*rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+\\.{0,1}\\d*))?\\)\\s*$/.exec(color)) {\r\n      var r = parseInt(match[1]), g = parseInt(match[2]), b = parseInt(match[3]);\r\n      r = (r < 16 ? '0' : '') + r.toString(16);\r\n      g = (g < 16 ? '0' : '') + g.toString(16);\r\n      b = (b < 16 ? '0' : '') + b.toString(16);\r\n      return '#' + r + g + b;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  function isColorDark(rgb) {\r\n    rgb = rgb.replace(/[\\s#]/g, '');\r\n    if (rgb.length == 3) {\r\n      rgb = rgb[0] + rgb[0] + rgb[1] + rgb[1] + rgb[2] + rgb[2];\r\n    }\r\n    var r = parseInt(rgb.substr(0, 2), 16);\r\n    var g = parseInt(rgb.substr(2, 2), 16);\r\n    var b = parseInt(rgb.substr(4, 2), 16);\r\n    var hsp = Math.sqrt(0.299 * (r * r) + 0.587 * (g * g) + 0.114 * (b * b));\r\n    return hsp < 120;\r\n  }\r\n\r\n  function versionCompare(v1, v2) {\r\n    if (typeof v1 !== 'string') v1 = '';\r\n    if (typeof v2 !== 'string') v2 = '';\r\n    v1 = v1.replace(/^\\s+|\\s+$/g, '').split('.');\r\n    v2 = v2.replace(/^\\s+|\\s+$/g, '').split('.');\r\n    var a = Math.max(v1.length, v2.length), i, p1, p2;\r\n    for (i = 0; i < a; i++) {\r\n      p1 = parseInt(v1[i]) || 0;\r\n      p2 = parseInt(v2[i]) || 0;\r\n      if (p1 == p2) continue;\r\n      if (p1 > p2) return 1;\r\n      return -1;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  function versionAtLeast(ver) {\r\n    return versionCompare(webAppVersion, ver) >= 0;\r\n  }\r\n\r\n  function byteLength(str) {\r\n    if (window.Blob) {\r\n      try { return new Blob([str]).size; } catch (e) {}\r\n    }\r\n    var s = str.length;\r\n    for (var i=str.length-1; i>=0; i--) {\r\n      var code = str.charCodeAt(i);\r\n      if (code > 0x7f && code <= 0x7ff) s++;\r\n      else if (code > 0x7ff && code <= 0xffff) s+=2;\r\n      if (code >= 0xdc00 && code <= 0xdfff) i--;\r\n    }\r\n    return s;\r\n  }\r\n\r\n  var BackButton = (function() {\r\n    var isVisible = false;\r\n\r\n    var backButton = {};\r\n    Object.defineProperty(backButton, 'isVisible', {\r\n      set: function(val){ setParams({is_visible: val}); },\r\n      get: function(){ return isVisible; },\r\n      enumerable: true\r\n    });\r\n\r\n    var curButtonState = null;\r\n\r\n    WebView.onEvent('back_button_pressed', onBackButtonPressed);\r\n\r\n    function onBackButtonPressed() {\r\n      receiveWebViewEvent('backButtonClicked');\r\n    }\r\n\r\n    function buttonParams() {\r\n      return {is_visible: isVisible};\r\n    }\r\n\r\n    function buttonState(btn_params) {\r\n      if (typeof btn_params === 'undefined') {\r\n        btn_params = buttonParams();\r\n      }\r\n      return JSON.stringify(btn_params);\r\n    }\r\n\r\n    function buttonCheckVersion() {\r\n      if (!versionAtLeast('6.1')) {\r\n        console.warn('[Telegram.WebApp] BackButton is not supported in version ' + webAppVersion);\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n\r\n    function updateButton() {\r\n      var btn_params = buttonParams();\r\n      var btn_state = buttonState(btn_params);\r\n      if (curButtonState === btn_state) {\r\n        return;\r\n      }\r\n      curButtonState = btn_state;\r\n      WebView.postEvent('web_app_setup_back_button', false, btn_params);\r\n    }\r\n\r\n    function setParams(params) {\r\n      if (!buttonCheckVersion()) {\r\n        return backButton;\r\n      }\r\n      if (typeof params.is_visible !== 'undefined') {\r\n        isVisible = !!params.is_visible;\r\n      }\r\n      updateButton();\r\n      return backButton;\r\n    }\r\n\r\n    backButton.onClick = function(callback) {\r\n      if (buttonCheckVersion()) {\r\n        onWebViewEvent('backButtonClicked', callback);\r\n      }\r\n      return backButton;\r\n    };\r\n    backButton.offClick = function(callback) {\r\n      if (buttonCheckVersion()) {\r\n        offWebViewEvent('backButtonClicked', callback);\r\n      }\r\n      return backButton;\r\n    };\r\n    backButton.show = function() {\r\n      return setParams({is_visible: true});\r\n    };\r\n    backButton.hide = function() {\r\n      return setParams({is_visible: false});\r\n    };\r\n    return backButton;\r\n  })();\r\n\r\n  var debugBottomBar = null, debugBottomBarBtns = {}, bottomBarHeight = 0;\r\n  if (initParams.tgWebAppDebug) {\r\n    debugBottomBar = document.createElement('tg-bottom-bar');\r\n    var debugBottomBarStyle = {\r\n      display: 'flex',\r\n      gap: '7px',\r\n      font: '600 14px/18px sans-serif',\r\n      width: '100%',\r\n      background: getBottomBarColor(),\r\n      position: 'fixed',\r\n      left: '0',\r\n      right: '0',\r\n      bottom: '0',\r\n      margin: '0',\r\n      padding: '7px',\r\n      textAlign: 'center',\r\n      boxSizing: 'border-box',\r\n      zIndex: '10000'\r\n    };\r\n    for (var k in debugBottomBarStyle) {\r\n      debugBottomBar.style[k] = debugBottomBarStyle[k];\r\n    }\r\n    document.addEventListener('DOMContentLoaded', function onDomLoaded(event) {\r\n      document.removeEventListener('DOMContentLoaded', onDomLoaded);\r\n      document.body.appendChild(debugBottomBar);\r\n    });\r\n    var animStyle = document.createElement('style');\r\n    animStyle.innerHTML = 'tg-bottom-button.shine { position: relative; overflow: hidden; } tg-bottom-button.shine:before { content:\"\"; position: absolute; top: 0; width: 100%; height: 100%; background: linear-gradient(120deg, transparent, rgba(255, 255, 255, .2), transparent); animation: tg-bottom-button-shine 5s ease-in-out infinite; } @-webkit-keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}} @keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}}';\r\n    debugBottomBar.appendChild(animStyle);\r\n  }\r\n  function updateDebugBottomBar() {\r\n    var mainBtn = debugBottomBarBtns.main._bottomButton;\r\n    var secondaryBtn = debugBottomBarBtns.secondary._bottomButton;\r\n    if (mainBtn.isVisible || secondaryBtn.isVisible) {\r\n      debugBottomBar.style.display = 'flex';\r\n      bottomBarHeight = 58;\r\n      if (mainBtn.isVisible && secondaryBtn.isVisible) {\r\n        if (secondaryBtn.position == 'top') {\r\n          debugBottomBar.style.flexDirection = 'column-reverse';\r\n          bottomBarHeight += 51;\r\n        } else if (secondaryBtn.position == 'bottom') {\r\n          debugBottomBar.style.flexDirection = 'column';\r\n          bottomBarHeight += 51;\r\n        } else if (secondaryBtn.position == 'left') {\r\n          debugBottomBar.style.flexDirection = 'row-reverse';\r\n        } else if (secondaryBtn.position == 'right') {\r\n          debugBottomBar.style.flexDirection = 'row';\r\n        }\r\n      }\r\n    } else {\r\n      debugBottomBar.style.display = 'none';\r\n      bottomBarHeight = 0;\r\n    }\r\n    debugBottomBar.style.background = getBottomBarColor();\r\n    if (document.documentElement) {\r\n      document.documentElement.style.boxSizing = 'border-box';\r\n      document.documentElement.style.paddingBottom = bottomBarHeight + 'px';\r\n    }\r\n    setViewportHeight();\r\n  }\r\n\r\n\r\n  var BottomButtonConstructor = function(type) {\r\n    var isMainButton = (type == 'main');\r\n    if (isMainButton) {\r\n      var setupFnName = 'web_app_setup_main_button';\r\n      var tgEventName = 'main_button_pressed';\r\n      var webViewEventName = 'mainButtonClicked';\r\n      var buttonTextDefault = 'Continue';\r\n      var buttonColorDefault = function(){ return themeParams.button_color || '#2481cc'; };\r\n      var buttonTextColorDefault = function(){ return themeParams.button_text_color || '#ffffff'; };\r\n    } else {\r\n      var setupFnName = 'web_app_setup_secondary_button';\r\n      var tgEventName = 'secondary_button_pressed';\r\n      var webViewEventName = 'secondaryButtonClicked';\r\n      var buttonTextDefault = 'Cancel';\r\n      var buttonColorDefault = function(){ return getBottomBarColor(); };\r\n      var buttonTextColorDefault = function(){ return themeParams.button_color || '#2481cc'; };\r\n    }\r\n\r\n    var isVisible = false;\r\n    var isActive = true;\r\n    var hasShineEffect = false;\r\n    var isProgressVisible = false;\r\n    var buttonType = type;\r\n    var buttonText = buttonTextDefault;\r\n    var buttonColor = false;\r\n    var buttonTextColor = false;\r\n    var buttonPosition = 'left';\r\n\r\n    var bottomButton = {};\r\n    Object.defineProperty(bottomButton, 'type', {\r\n      get: function(){ return buttonType; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(bottomButton, 'text', {\r\n      set: function(val){ bottomButton.setParams({text: val}); },\r\n      get: function(){ return buttonText; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(bottomButton, 'color', {\r\n      set: function(val){ bottomButton.setParams({color: val}); },\r\n      get: function(){ return buttonColor || buttonColorDefault(); },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(bottomButton, 'textColor', {\r\n      set: function(val){ bottomButton.setParams({text_color: val}); },\r\n      get: function(){ return buttonTextColor || buttonTextColorDefault(); },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(bottomButton, 'isVisible', {\r\n      set: function(val){ bottomButton.setParams({is_visible: val}); },\r\n      get: function(){ return isVisible; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(bottomButton, 'isProgressVisible', {\r\n      get: function(){ return isProgressVisible; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(bottomButton, 'isActive', {\r\n      set: function(val){ bottomButton.setParams({is_active: val}); },\r\n      get: function(){ return isActive; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(bottomButton, 'hasShineEffect', {\r\n      set: function(val){ bottomButton.setParams({has_shine_effect: val}); },\r\n      get: function(){ return hasShineEffect; },\r\n      enumerable: true\r\n    });\r\n    if (!isMainButton) {\r\n      Object.defineProperty(bottomButton, 'position', {\r\n        set: function(val){ bottomButton.setParams({position: val}); },\r\n        get: function(){ return buttonPosition; },\r\n        enumerable: true\r\n      });\r\n    }\r\n\r\n    var curButtonState = null;\r\n\r\n    WebView.onEvent(tgEventName, onBottomButtonPressed);\r\n\r\n    var debugBtn = null;\r\n    if (initParams.tgWebAppDebug) {\r\n      debugBtn = document.createElement('tg-bottom-button');\r\n      var debugBtnStyle = {\r\n        display: 'none',\r\n        width: '100%',\r\n        height: '44px',\r\n        borderRadius: '0',\r\n        background: 'no-repeat right center',\r\n        padding: '13px 15px',\r\n        textAlign: 'center',\r\n        boxSizing: 'border-box'\r\n      };\r\n      for (var k in debugBtnStyle) {\r\n        debugBtn.style[k] = debugBtnStyle[k];\r\n      }\r\n      debugBottomBar.appendChild(debugBtn);\r\n      debugBtn.addEventListener('click', onBottomButtonPressed, false);\r\n      debugBtn._bottomButton = bottomButton;\r\n      debugBottomBarBtns[type] = debugBtn;\r\n    }\r\n\r\n    function onBottomButtonPressed() {\r\n      if (isActive) {\r\n        receiveWebViewEvent(webViewEventName);\r\n      }\r\n    }\r\n\r\n    function buttonParams() {\r\n      var color = bottomButton.color;\r\n      var text_color = bottomButton.textColor;\r\n      if (isVisible) {\r\n        var params = {\r\n          is_visible: true,\r\n          is_active: isActive,\r\n          is_progress_visible: isProgressVisible,\r\n          text: buttonText,\r\n          color: color,\r\n          text_color: text_color,\r\n          has_shine_effect: hasShineEffect && isActive && !isProgressVisible\r\n        };\r\n        if (!isMainButton) {\r\n          params.position = buttonPosition;\r\n        }\r\n      } else {\r\n        var params = {\r\n          is_visible: false\r\n        };\r\n      }\r\n      return params;\r\n    }\r\n\r\n    function buttonState(btn_params) {\r\n      if (typeof btn_params === 'undefined') {\r\n        btn_params = buttonParams();\r\n      }\r\n      return JSON.stringify(btn_params);\r\n    }\r\n\r\n    function updateButton() {\r\n      var btn_params = buttonParams();\r\n      var btn_state = buttonState(btn_params);\r\n      if (curButtonState === btn_state) {\r\n        return;\r\n      }\r\n      curButtonState = btn_state;\r\n      WebView.postEvent(setupFnName, false, btn_params);\r\n      if (initParams.tgWebAppDebug) {\r\n        updateDebugButton(btn_params);\r\n      }\r\n    }\r\n\r\n    function updateDebugButton(btn_params) {\r\n      if (btn_params.is_visible) {\r\n        debugBtn.style.display = 'block';\r\n\r\n        debugBtn.style.opacity = btn_params.is_active ? '1' : '0.8';\r\n        debugBtn.style.cursor = btn_params.is_active ? 'pointer' : 'auto';\r\n        debugBtn.disabled = !btn_params.is_active;\r\n        debugBtn.innerText = btn_params.text;\r\n        debugBtn.className = btn_params.has_shine_effect ? 'shine' : '';\r\n        debugBtn.style.backgroundImage = btn_params.is_progress_visible ? \"url('data:image/svg+xml,\" + encodeURIComponent('<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewport=\"0 0 48 48\" width=\"48px\" height=\"48px\"><circle cx=\"50%\" cy=\"50%\" stroke=\"' + btn_params.text_color + '\" stroke-width=\"2.25\" stroke-linecap=\"round\" fill=\"none\" stroke-dashoffset=\"106\" r=\"9\" stroke-dasharray=\"56.52\" rotate=\"-90\"><animate attributeName=\"stroke-dashoffset\" attributeType=\"XML\" dur=\"360s\" from=\"0\" to=\"12500\" repeatCount=\"indefinite\"></animate><animateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" dur=\"1s\" from=\"-90 24 24\" to=\"630 24 24\" repeatCount=\"indefinite\"></animateTransform></circle></svg>') + \"')\" : 'none';\r\n        debugBtn.style.backgroundColor = btn_params.color;\r\n        debugBtn.style.color = btn_params.text_color;\r\n      } else {\r\n        debugBtn.style.display = 'none';\r\n      }\r\n      updateDebugBottomBar();\r\n    }\r\n\r\n    function setParams(params) {\r\n      if (typeof params.text !== 'undefined') {\r\n        var text = strTrim(params.text);\r\n        if (!text.length) {\r\n          console.error('[Telegram.WebApp] Bottom button text is required', params.text);\r\n          throw Error('WebAppBottomButtonParamInvalid');\r\n        }\r\n        if (text.length > 64) {\r\n          console.error('[Telegram.WebApp] Bottom button text is too long', text);\r\n          throw Error('WebAppBottomButtonParamInvalid');\r\n        }\r\n        buttonText = text;\r\n      }\r\n      if (typeof params.color !== 'undefined') {\r\n        if (params.color === false ||\r\n            params.color === null) {\r\n          buttonColor = false;\r\n        } else {\r\n          var color = parseColorToHex(params.color);\r\n          if (!color) {\r\n            console.error('[Telegram.WebApp] Bottom button color format is invalid', params.color);\r\n            throw Error('WebAppBottomButtonParamInvalid');\r\n          }\r\n          buttonColor = color;\r\n        }\r\n      }\r\n      if (typeof params.text_color !== 'undefined') {\r\n        if (params.text_color === false ||\r\n            params.text_color === null) {\r\n          buttonTextColor = false;\r\n        } else {\r\n          var text_color = parseColorToHex(params.text_color);\r\n          if (!text_color) {\r\n            console.error('[Telegram.WebApp] Bottom button text color format is invalid', params.text_color);\r\n            throw Error('WebAppBottomButtonParamInvalid');\r\n          }\r\n          buttonTextColor = text_color;\r\n        }\r\n      }\r\n      if (typeof params.is_visible !== 'undefined') {\r\n        if (params.is_visible &&\r\n            !bottomButton.text.length) {\r\n          console.error('[Telegram.WebApp] Bottom button text is required');\r\n          throw Error('WebAppBottomButtonParamInvalid');\r\n        }\r\n        isVisible = !!params.is_visible;\r\n      }\r\n      if (typeof params.has_shine_effect !== 'undefined') {\r\n        hasShineEffect = !!params.has_shine_effect;\r\n      }\r\n      if (!isMainButton && typeof params.position !== 'undefined') {\r\n        if (params.position != 'left' && params.position != 'right' &&\r\n            params.position != 'top' && params.position != 'bottom') {\r\n          console.error('[Telegram.WebApp] Bottom button posiition is invalid', params.position);\r\n          throw Error('WebAppBottomButtonParamInvalid');\r\n        }\r\n        buttonPosition = params.position;\r\n      }\r\n      if (typeof params.is_active !== 'undefined') {\r\n        isActive = !!params.is_active;\r\n      }\r\n      updateButton();\r\n      return bottomButton;\r\n    }\r\n\r\n    bottomButton.setText = function(text) {\r\n      return bottomButton.setParams({text: text});\r\n    };\r\n    bottomButton.onClick = function(callback) {\r\n      onWebViewEvent(webViewEventName, callback);\r\n      return bottomButton;\r\n    };\r\n    bottomButton.offClick = function(callback) {\r\n      offWebViewEvent(webViewEventName, callback);\r\n      return bottomButton;\r\n    };\r\n    bottomButton.show = function() {\r\n      return bottomButton.setParams({is_visible: true});\r\n    };\r\n    bottomButton.hide = function() {\r\n      return bottomButton.setParams({is_visible: false});\r\n    };\r\n    bottomButton.enable = function() {\r\n      return bottomButton.setParams({is_active: true});\r\n    };\r\n    bottomButton.disable = function() {\r\n      return bottomButton.setParams({is_active: false});\r\n    };\r\n    bottomButton.showProgress = function(leaveActive) {\r\n      isActive = !!leaveActive;\r\n      isProgressVisible = true;\r\n      updateButton();\r\n      return bottomButton;\r\n    };\r\n    bottomButton.hideProgress = function() {\r\n      if (!bottomButton.isActive) {\r\n        isActive = true;\r\n      }\r\n      isProgressVisible = false;\r\n      updateButton();\r\n      return bottomButton;\r\n    }\r\n    bottomButton.setParams = setParams;\r\n    return bottomButton;\r\n  };\r\n  var MainButton = BottomButtonConstructor('main');\r\n  var SecondaryButton = BottomButtonConstructor('secondary');\r\n\r\n  var SettingsButton = (function() {\r\n    var isVisible = false;\r\n\r\n    var settingsButton = {};\r\n    Object.defineProperty(settingsButton, 'isVisible', {\r\n      set: function(val){ setParams({is_visible: val}); },\r\n      get: function(){ return isVisible; },\r\n      enumerable: true\r\n    });\r\n\r\n    var curButtonState = null;\r\n\r\n    WebView.onEvent('settings_button_pressed', onSettingsButtonPressed);\r\n\r\n    function onSettingsButtonPressed() {\r\n      receiveWebViewEvent('settingsButtonClicked');\r\n    }\r\n\r\n    function buttonParams() {\r\n      return {is_visible: isVisible};\r\n    }\r\n\r\n    function buttonState(btn_params) {\r\n      if (typeof btn_params === 'undefined') {\r\n        btn_params = buttonParams();\r\n      }\r\n      return JSON.stringify(btn_params);\r\n    }\r\n\r\n    function buttonCheckVersion() {\r\n      if (!versionAtLeast('6.10')) {\r\n        console.warn('[Telegram.WebApp] SettingsButton is not supported in version ' + webAppVersion);\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n\r\n    function updateButton() {\r\n      var btn_params = buttonParams();\r\n      var btn_state = buttonState(btn_params);\r\n      if (curButtonState === btn_state) {\r\n        return;\r\n      }\r\n      curButtonState = btn_state;\r\n      WebView.postEvent('web_app_setup_settings_button', false, btn_params);\r\n    }\r\n\r\n    function setParams(params) {\r\n      if (!buttonCheckVersion()) {\r\n        return settingsButton;\r\n      }\r\n      if (typeof params.is_visible !== 'undefined') {\r\n        isVisible = !!params.is_visible;\r\n      }\r\n      updateButton();\r\n      return settingsButton;\r\n    }\r\n\r\n    settingsButton.onClick = function(callback) {\r\n      if (buttonCheckVersion()) {\r\n        onWebViewEvent('settingsButtonClicked', callback);\r\n      }\r\n      return settingsButton;\r\n    };\r\n    settingsButton.offClick = function(callback) {\r\n      if (buttonCheckVersion()) {\r\n        offWebViewEvent('settingsButtonClicked', callback);\r\n      }\r\n      return settingsButton;\r\n    };\r\n    settingsButton.show = function() {\r\n      return setParams({is_visible: true});\r\n    };\r\n    settingsButton.hide = function() {\r\n      return setParams({is_visible: false});\r\n    };\r\n    return settingsButton;\r\n  })();\r\n\r\n  var HapticFeedback = (function() {\r\n    var hapticFeedback = {};\r\n\r\n    function triggerFeedback(params) {\r\n      if (!versionAtLeast('6.1')) {\r\n        console.warn('[Telegram.WebApp] HapticFeedback is not supported in version ' + webAppVersion);\r\n        return hapticFeedback;\r\n      }\r\n      if (params.type == 'impact') {\r\n        if (params.impact_style != 'light' &&\r\n            params.impact_style != 'medium' &&\r\n            params.impact_style != 'heavy' &&\r\n            params.impact_style != 'rigid' &&\r\n            params.impact_style != 'soft') {\r\n          console.error('[Telegram.WebApp] Haptic impact style is invalid', params.impact_style);\r\n          throw Error('WebAppHapticImpactStyleInvalid');\r\n        }\r\n      } else if (params.type == 'notification') {\r\n        if (params.notification_type != 'error' &&\r\n            params.notification_type != 'success' &&\r\n            params.notification_type != 'warning') {\r\n          console.error('[Telegram.WebApp] Haptic notification type is invalid', params.notification_type);\r\n          throw Error('WebAppHapticNotificationTypeInvalid');\r\n        }\r\n      } else if (params.type == 'selection_change') {\r\n        // no params needed\r\n      } else {\r\n        console.error('[Telegram.WebApp] Haptic feedback type is invalid', params.type);\r\n        throw Error('WebAppHapticFeedbackTypeInvalid');\r\n      }\r\n      WebView.postEvent('web_app_trigger_haptic_feedback', false, params);\r\n      return hapticFeedback;\r\n    }\r\n\r\n    hapticFeedback.impactOccurred = function(style) {\r\n      return triggerFeedback({type: 'impact', impact_style: style});\r\n    };\r\n    hapticFeedback.notificationOccurred = function(type) {\r\n      return triggerFeedback({type: 'notification', notification_type: type});\r\n    };\r\n    hapticFeedback.selectionChanged = function() {\r\n      return triggerFeedback({type: 'selection_change'});\r\n    };\r\n    return hapticFeedback;\r\n  })();\r\n\r\n  var CloudStorage = (function() {\r\n    var cloudStorage = {};\r\n\r\n    function invokeStorageMethod(method, params, callback) {\r\n      if (!versionAtLeast('6.9')) {\r\n        console.error('[Telegram.WebApp] CloudStorage is not supported in version ' + webAppVersion);\r\n        throw Error('WebAppMethodUnsupported');\r\n      }\r\n      invokeCustomMethod(method, params, callback);\r\n      return cloudStorage;\r\n    }\r\n\r\n    cloudStorage.setItem = function(key, value, callback) {\r\n      return invokeStorageMethod('saveStorageValue', {key: key, value: value}, callback);\r\n    };\r\n    cloudStorage.getItem = function(key, callback) {\r\n      return cloudStorage.getItems([key], callback ? function(err, res) {\r\n        if (err) callback(err);\r\n        else callback(null, res[key]);\r\n      } : null);\r\n    };\r\n    cloudStorage.getItems = function(keys, callback) {\r\n      return invokeStorageMethod('getStorageValues', {keys: keys}, callback);\r\n    };\r\n    cloudStorage.removeItem = function(key, callback) {\r\n      return cloudStorage.removeItems([key], callback);\r\n    };\r\n    cloudStorage.removeItems = function(keys, callback) {\r\n      return invokeStorageMethod('deleteStorageValues', {keys: keys}, callback);\r\n    };\r\n    cloudStorage.getKeys = function(callback) {\r\n      return invokeStorageMethod('getStorageKeys', {}, callback);\r\n    };\r\n    return cloudStorage;\r\n  })();\r\n\r\n  var BiometricManager = (function() {\r\n    var isInited = false;\r\n    var isBiometricAvailable = false;\r\n    var biometricType = 'unknown';\r\n    var isAccessRequested = false;\r\n    var isAccessGranted = false;\r\n    var isBiometricTokenSaved = false;\r\n    var deviceId = '';\r\n\r\n    var biometricManager = {};\r\n    Object.defineProperty(biometricManager, 'isInited', {\r\n      get: function(){ return isInited; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(biometricManager, 'isBiometricAvailable', {\r\n      get: function(){ return isInited && isBiometricAvailable; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(biometricManager, 'biometricType', {\r\n      get: function(){ return biometricType || 'unknown'; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(biometricManager, 'isAccessRequested', {\r\n      get: function(){ return isAccessRequested; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(biometricManager, 'isAccessGranted', {\r\n      get: function(){ return isAccessRequested && isAccessGranted; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(biometricManager, 'isBiometricTokenSaved', {\r\n      get: function(){ return isBiometricTokenSaved; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(biometricManager, 'deviceId', {\r\n      get: function(){ return deviceId || ''; },\r\n      enumerable: true\r\n    });\r\n\r\n    var initRequestState = {callbacks: []};\r\n    var accessRequestState = false;\r\n    var authRequestState = false;\r\n    var tokenRequestState = false;\r\n\r\n    WebView.onEvent('biometry_info_received',  onBiometryInfoReceived);\r\n    WebView.onEvent('biometry_auth_requested', onBiometryAuthRequested);\r\n    WebView.onEvent('biometry_token_updated',  onBiometryTokenUpdated);\r\n\r\n    function onBiometryInfoReceived(eventType, eventData) {\r\n      isInited = true;\r\n      if (eventData.available) {\r\n        isBiometricAvailable = true;\r\n        biometricType = eventData.type || 'unknown';\r\n        if (eventData.access_requested) {\r\n          isAccessRequested = true;\r\n          isAccessGranted = !!eventData.access_granted;\r\n          isBiometricTokenSaved = !!eventData.token_saved;\r\n        } else {\r\n          isAccessRequested = false;\r\n          isAccessGranted = false;\r\n          isBiometricTokenSaved = false;\r\n        }\r\n      } else {\r\n        isBiometricAvailable = false;\r\n        biometricType = 'unknown';\r\n        isAccessRequested = false;\r\n        isAccessGranted = false;\r\n        isBiometricTokenSaved = false;\r\n      }\r\n      deviceId = eventData.device_id || '';\r\n\r\n      if (initRequestState.callbacks.length > 0) {\r\n        for (var i = 0; i < initRequestState.callbacks.length; i++) {\r\n          var callback = initRequestState.callbacks[i];\r\n          callback();\r\n        }\r\n        initRequestState.callbacks = [];\r\n      }\r\n      if (accessRequestState) {\r\n        var state = accessRequestState;\r\n        accessRequestState = false;\r\n        if (state.callback) {\r\n          state.callback(isAccessGranted);\r\n        }\r\n      }\r\n      receiveWebViewEvent('biometricManagerUpdated');\r\n    }\r\n    function onBiometryAuthRequested(eventType, eventData) {\r\n      var isAuthenticated = (eventData.status == 'authorized'),\r\n          biometricToken = eventData.token || '';\r\n      if (authRequestState) {\r\n        var state = authRequestState;\r\n        authRequestState = false;\r\n        if (state.callback) {\r\n          state.callback(isAuthenticated, isAuthenticated ? biometricToken : null);\r\n        }\r\n      }\r\n      receiveWebViewEvent('biometricAuthRequested', isAuthenticated ? {\r\n        isAuthenticated: true,\r\n        biometricToken: biometricToken\r\n      } : {\r\n        isAuthenticated: false\r\n      });\r\n    }\r\n    function onBiometryTokenUpdated(eventType, eventData) {\r\n      var applied = false;\r\n      if (isBiometricAvailable &&\r\n          isAccessRequested) {\r\n        if (eventData.status == 'updated') {\r\n          isBiometricTokenSaved = true;\r\n          applied = true;\r\n        }\r\n        else if (eventData.status == 'removed') {\r\n          isBiometricTokenSaved = false;\r\n          applied = true;\r\n        }\r\n      }\r\n      if (tokenRequestState) {\r\n        var state = tokenRequestState;\r\n        tokenRequestState = false;\r\n        if (state.callback) {\r\n          state.callback(applied);\r\n        }\r\n      }\r\n      receiveWebViewEvent('biometricTokenUpdated', {\r\n        isUpdated: applied\r\n      });\r\n    }\r\n\r\n    function checkVersion() {\r\n      if (!versionAtLeast('7.2')) {\r\n        console.warn('[Telegram.WebApp] BiometricManager is not supported in version ' + webAppVersion);\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n\r\n    function checkInit() {\r\n      if (!isInited) {\r\n        console.error('[Telegram.WebApp] BiometricManager should be inited before using.');\r\n        throw Error('WebAppBiometricManagerNotInited');\r\n      }\r\n      return true;\r\n    }\r\n\r\n    biometricManager.init = function(callback) {\r\n      if (!checkVersion()) {\r\n        return biometricManager;\r\n      }\r\n      if (isInited) {\r\n        return biometricManager;\r\n      }\r\n      if (callback) {\r\n        initRequestState.callbacks.push(callback);\r\n      }\r\n      WebView.postEvent('web_app_biometry_get_info', false);\r\n      return biometricManager;\r\n    };\r\n    biometricManager.requestAccess = function(params, callback) {\r\n      if (!checkVersion()) {\r\n        return biometricManager;\r\n      }\r\n      checkInit();\r\n      if (!isBiometricAvailable) {\r\n        console.error('[Telegram.WebApp] Biometrics is not available on this device.');\r\n        throw Error('WebAppBiometricManagerBiometricsNotAvailable');\r\n      }\r\n      if (accessRequestState) {\r\n        console.error('[Telegram.WebApp] Access is already requested');\r\n        throw Error('WebAppBiometricManagerAccessRequested');\r\n      }\r\n      var popup_params = {};\r\n      if (typeof params.reason !== 'undefined') {\r\n        var reason = strTrim(params.reason);\r\n        if (reason.length > 128) {\r\n          console.error('[Telegram.WebApp] Biometric reason is too long', reason);\r\n          throw Error('WebAppBiometricRequestAccessParamInvalid');\r\n        }\r\n        if (reason.length > 0) {\r\n          popup_params.reason = reason;\r\n        }\r\n      }\r\n\r\n      accessRequestState = {\r\n        callback: callback\r\n      };\r\n      WebView.postEvent('web_app_biometry_request_access', false, popup_params);\r\n      return biometricManager;\r\n    };\r\n    biometricManager.authenticate = function(params, callback) {\r\n      if (!checkVersion()) {\r\n        return biometricManager;\r\n      }\r\n      checkInit();\r\n      if (!isBiometricAvailable) {\r\n        console.error('[Telegram.WebApp] Biometrics is not available on this device.');\r\n        throw Error('WebAppBiometricManagerBiometricsNotAvailable');\r\n      }\r\n      if (!isAccessGranted) {\r\n        console.error('[Telegram.WebApp] Biometric access was not granted by the user.');\r\n        throw Error('WebAppBiometricManagerBiometricAccessNotGranted');\r\n      }\r\n      if (authRequestState) {\r\n        console.error('[Telegram.WebApp] Authentication request is already in progress.');\r\n        throw Error('WebAppBiometricManagerAuthenticationRequested');\r\n      }\r\n      var popup_params = {};\r\n      if (typeof params.reason !== 'undefined') {\r\n        var reason = strTrim(params.reason);\r\n        if (reason.length > 128) {\r\n          console.error('[Telegram.WebApp] Biometric reason is too long', reason);\r\n          throw Error('WebAppBiometricRequestAccessParamInvalid');\r\n        }\r\n        if (reason.length > 0) {\r\n          popup_params.reason = reason;\r\n        }\r\n      }\r\n\r\n      authRequestState = {\r\n        callback: callback\r\n      };\r\n      WebView.postEvent('web_app_biometry_request_auth', false, popup_params);\r\n      return biometricManager;\r\n    };\r\n    biometricManager.updateBiometricToken = function(token, callback) {\r\n      if (!checkVersion()) {\r\n        return biometricManager;\r\n      }\r\n      token = token || '';\r\n      if (token.length > 1024) {\r\n        console.error('[Telegram.WebApp] Token is too long', token);\r\n        throw Error('WebAppBiometricManagerTokenInvalid');\r\n      }\r\n      checkInit();\r\n      if (!isBiometricAvailable) {\r\n        console.error('[Telegram.WebApp] Biometrics is not available on this device.');\r\n        throw Error('WebAppBiometricManagerBiometricsNotAvailable');\r\n      }\r\n      if (!isAccessGranted) {\r\n        console.error('[Telegram.WebApp] Biometric access was not granted by the user.');\r\n        throw Error('WebAppBiometricManagerBiometricAccessNotGranted');\r\n      }\r\n      if (tokenRequestState) {\r\n        console.error('[Telegram.WebApp] Token request is already in progress.');\r\n        throw Error('WebAppBiometricManagerTokenUpdateRequested');\r\n      }\r\n      tokenRequestState = {\r\n        callback: callback\r\n      };\r\n      WebView.postEvent('web_app_biometry_update_token', false, {token: token});\r\n      return biometricManager;\r\n    };\r\n    biometricManager.openSettings = function() {\r\n      if (!checkVersion()) {\r\n        return biometricManager;\r\n      }\r\n      checkInit();\r\n      if (!isBiometricAvailable) {\r\n        console.error('[Telegram.WebApp] Biometrics is not available on this device.');\r\n        throw Error('WebAppBiometricManagerBiometricsNotAvailable');\r\n      }\r\n      if (!isAccessRequested) {\r\n        console.error('[Telegram.WebApp] Biometric access was not requested yet.');\r\n        throw Error('WebAppBiometricManagerBiometricsAccessNotRequested');\r\n      }\r\n      if (isAccessGranted) {\r\n        console.warn('[Telegram.WebApp] Biometric access was granted by the user, no need to go to settings.');\r\n        return biometricManager;\r\n      }\r\n      WebView.postEvent('web_app_biometry_open_settings', false);\r\n      return biometricManager;\r\n    };\r\n    return biometricManager;\r\n  })();\r\n\r\n  var LocationManager = (function() {\r\n    var isInited = false;\r\n    var isLocationAvailable = false;\r\n    var isAccessRequested = false;\r\n    var isAccessGranted = false;\r\n\r\n    var locationManager = {};\r\n    Object.defineProperty(locationManager, 'isInited', {\r\n      get: function(){ return isInited; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(locationManager, 'isLocationAvailable', {\r\n      get: function(){ return isInited && isLocationAvailable; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(locationManager, 'isAccessRequested', {\r\n      get: function(){ return isAccessRequested; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(locationManager, 'isAccessGranted', {\r\n      get: function(){ return isAccessRequested && isAccessGranted; },\r\n      enumerable: true\r\n    });\r\n\r\n    var initRequestState = {callbacks: []};\r\n    var getRequestState = {callbacks: []};\r\n\r\n    WebView.onEvent('location_checked',  onLocationChecked);\r\n    WebView.onEvent('location_requested', onLocationRequested);\r\n\r\n    function onLocationChecked(eventType, eventData) {\r\n      isInited = true;\r\n      if (eventData.available) {\r\n        isLocationAvailable = true;\r\n        if (eventData.access_requested) {\r\n          isAccessRequested = true;\r\n          isAccessGranted = !!eventData.access_granted;\r\n        } else {\r\n          isAccessRequested = false;\r\n          isAccessGranted = false;\r\n        }\r\n      } else {\r\n        isLocationAvailable = false;\r\n        isAccessRequested = false;\r\n        isAccessGranted = false;\r\n      }\r\n\r\n      if (initRequestState.callbacks.length > 0) {\r\n        for (var i = 0; i < initRequestState.callbacks.length; i++) {\r\n          var callback = initRequestState.callbacks[i];\r\n          callback();\r\n        }\r\n        initRequestState.callbacks = [];\r\n      }\r\n      receiveWebViewEvent('locationManagerUpdated');\r\n    }\r\n    function onLocationRequested(eventType, eventData) {\r\n      if (!eventData.available) {\r\n        locationData = null;\r\n      } else {\r\n        var locationData = {\r\n          latitude: eventData.latitude,\r\n          longitude: eventData.longitude,\r\n          altitude: null,\r\n          course: null,\r\n          speed: null,\r\n          horizontal_accuracy: null,\r\n          vertical_accuracy: null,\r\n          course_accuracy: null,\r\n          speed_accuracy: null,\r\n        };\r\n        if (typeof eventData.altitude !== 'undefined' && eventData.altitude !== null) {\r\n          locationData.altitude = eventData.altitude;\r\n        }\r\n        if (typeof eventData.course !== 'undefined' && eventData.course !== null) {\r\n          locationData.course = eventData.course % 360;\r\n        }\r\n        if (typeof eventData.speed !== 'undefined' && eventData.speed !== null) {\r\n          locationData.speed = eventData.speed;\r\n        }\r\n        if (typeof eventData.horizontal_accuracy !== 'undefined' && eventData.horizontal_accuracy !== null) {\r\n          locationData.horizontal_accuracy = eventData.horizontal_accuracy;\r\n        }\r\n        if (typeof eventData.vertical_accuracy !== 'undefined' && eventData.vertical_accuracy !== null) {\r\n          locationData.vertical_accuracy = eventData.vertical_accuracy;\r\n        }\r\n        if (typeof eventData.course_accuracy !== 'undefined' && eventData.course_accuracy !== null) {\r\n          locationData.course_accuracy = eventData.course_accuracy;\r\n        }\r\n        if (typeof eventData.speed_accuracy !== 'undefined' && eventData.speed_accuracy !== null) {\r\n          locationData.speed_accuracy = eventData.speed_accuracy;\r\n        }\r\n      }\r\n      if (!eventData.available ||\r\n          !isLocationAvailable ||\r\n          !isAccessRequested ||\r\n          !isAccessGranted) {\r\n        initRequestState.callbacks.push(function() {\r\n          locationResponse(locationData);\r\n        });\r\n        WebView.postEvent('web_app_check_location', false);\r\n      } else {\r\n        locationResponse(locationData);\r\n      }\r\n    }\r\n    function locationResponse(response) {\r\n      if (getRequestState.callbacks.length > 0) {\r\n        for (var i = 0; i < getRequestState.callbacks.length; i++) {\r\n          var callback = getRequestState.callbacks[i];\r\n          callback(response);\r\n        }\r\n        getRequestState.callbacks = [];\r\n      }\r\n      if (response !== null) {\r\n        receiveWebViewEvent('locationRequested', {\r\n          locationData: response\r\n        });\r\n      }\r\n    }\r\n\r\n    function checkVersion() {\r\n      if (!versionAtLeast('8.0')) {\r\n        console.warn('[Telegram.WebApp] LocationManager is not supported in version ' + webAppVersion);\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n\r\n    function checkInit() {\r\n      if (!isInited) {\r\n        console.error('[Telegram.WebApp] LocationManager should be inited before using.');\r\n        throw Error('WebAppLocationManagerNotInited');\r\n      }\r\n      return true;\r\n    }\r\n\r\n    locationManager.init = function(callback) {\r\n      if (!checkVersion()) {\r\n        return locationManager;\r\n      }\r\n      if (isInited) {\r\n        return locationManager;\r\n      }\r\n      if (callback) {\r\n        initRequestState.callbacks.push(callback);\r\n      }\r\n      WebView.postEvent('web_app_check_location', false);\r\n      return locationManager;\r\n    };\r\n    locationManager.getLocation = function(callback) {\r\n      if (!checkVersion()) {\r\n        return locationManager;\r\n      }\r\n      checkInit();\r\n      if (!isLocationAvailable) {\r\n        console.error('[Telegram.WebApp] Location is not available on this device.');\r\n        throw Error('WebAppLocationManagerLocationNotAvailable');\r\n      }\r\n\r\n      getRequestState.callbacks.push(callback);\r\n      WebView.postEvent('web_app_request_location');\r\n      return locationManager;\r\n    };\r\n    locationManager.openSettings = function() {\r\n      if (!checkVersion()) {\r\n        return locationManager;\r\n      }\r\n      checkInit();\r\n      if (!isLocationAvailable) {\r\n        console.error('[Telegram.WebApp] Location is not available on this device.');\r\n        throw Error('WebAppLocationManagerLocationNotAvailable');\r\n      }\r\n      if (!isAccessRequested) {\r\n        console.error('[Telegram.WebApp] Location access was not requested yet.');\r\n        throw Error('WebAppLocationManagerLocationAccessNotRequested');\r\n      }\r\n      if (isAccessGranted) {\r\n        console.warn('[Telegram.WebApp] Location access was granted by the user, no need to go to settings.');\r\n        return locationManager;\r\n      }\r\n      WebView.postEvent('web_app_open_location_settings', false);\r\n      return locationManager;\r\n    };\r\n    return locationManager;\r\n  })();\r\n\r\n  var Accelerometer = (function() {\r\n    var isStarted = false;\r\n    var valueX = null, valueY = null, valueZ = null;\r\n    var startCallbacks = [], stopCallbacks = [];\r\n\r\n    var accelerometer = {};\r\n    Object.defineProperty(accelerometer, 'isStarted', {\r\n      get: function(){ return isStarted; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(accelerometer, 'x', {\r\n      get: function(){ return valueX; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(accelerometer, 'y', {\r\n      get: function(){ return valueY; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(accelerometer, 'z', {\r\n      get: function(){ return valueZ; },\r\n      enumerable: true\r\n    });\r\n\r\n    WebView.onEvent('accelerometer_started', onAccelerometerStarted);\r\n    WebView.onEvent('accelerometer_stopped', onAccelerometerStopped);\r\n    WebView.onEvent('accelerometer_changed', onAccelerometerChanged);\r\n    WebView.onEvent('accelerometer_failed',  onAccelerometerFailed);\r\n\r\n    function onAccelerometerStarted(eventType, eventData) {\r\n      isStarted = true;\r\n      if (startCallbacks.length > 0) {\r\n        for (var i = 0; i < startCallbacks.length; i++) {\r\n          var callback = startCallbacks[i];\r\n          callback(true);\r\n        }\r\n        startCallbacks = [];\r\n      }\r\n      receiveWebViewEvent('accelerometerStarted');\r\n    }\r\n    function onAccelerometerStopped(eventType, eventData) {\r\n      isStarted = false;\r\n      if (stopCallbacks.length > 0) {\r\n        for (var i = 0; i < stopCallbacks.length; i++) {\r\n          var callback = stopCallbacks[i];\r\n          callback(true);\r\n        }\r\n        stopCallbacks = [];\r\n      }\r\n      receiveWebViewEvent('accelerometerStopped');\r\n    }\r\n    function onAccelerometerChanged(eventType, eventData) {\r\n      valueX = eventData.x;\r\n      valueY = eventData.y;\r\n      valueZ = eventData.z;\r\n      receiveWebViewEvent('accelerometerChanged');\r\n    }\r\n    function onAccelerometerFailed(eventType, eventData) {\r\n      if (startCallbacks.length > 0) {\r\n        for (var i = 0; i < startCallbacks.length; i++) {\r\n          var callback = startCallbacks[i];\r\n          callback(false);\r\n        }\r\n        startCallbacks = [];\r\n      }\r\n      receiveWebViewEvent('accelerometerFailed', {\r\n        error: eventData.error\r\n      });\r\n    }\r\n\r\n    function checkVersion() {\r\n      if (!versionAtLeast('8.0')) {\r\n        console.warn('[Telegram.WebApp] Accelerometer is not supported in version ' + webAppVersion);\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n\r\n    accelerometer.start = function(params, callback) {\r\n      params = params || {};\r\n      if (!checkVersion()) {\r\n        return accelerometer;\r\n      }\r\n      var req_params = {};\r\n      var refresh_rate = parseInt(params.refresh_rate || 1000);\r\n      if (isNaN(refresh_rate) || refresh_rate < 20 || refresh_rate > 1000) {\r\n        console.warn('[Telegram.WebApp] Accelerometer refresh_rate is invalid', refresh_rate);\r\n      } else {\r\n        req_params.refresh_rate = refresh_rate;\r\n      }\r\n\r\n      if (callback) {\r\n        startCallbacks.push(callback);\r\n      }\r\n      WebView.postEvent('web_app_start_accelerometer', false, req_params);\r\n      return accelerometer;\r\n    };\r\n    accelerometer.stop = function(callback) {\r\n      if (!checkVersion()) {\r\n        return accelerometer;\r\n      }\r\n      if (callback) {\r\n        stopCallbacks.push(callback);\r\n      }\r\n      WebView.postEvent('web_app_stop_accelerometer');\r\n      return accelerometer;\r\n    };\r\n    return accelerometer;\r\n  })();\r\n\r\n  var DeviceOrientation = (function() {\r\n    var isStarted = false;\r\n    var valueAlpha = null, valueBeta = null, valueGamma = null, valueAbsolute = false;\r\n    var startCallbacks = [], stopCallbacks = [];\r\n\r\n    var deviceOrientation = {};\r\n    Object.defineProperty(deviceOrientation, 'isStarted', {\r\n      get: function(){ return isStarted; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(deviceOrientation, 'absolute', {\r\n      get: function(){ return valueAbsolute; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(deviceOrientation, 'alpha', {\r\n      get: function(){ return valueAlpha; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(deviceOrientation, 'beta', {\r\n      get: function(){ return valueBeta; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(deviceOrientation, 'gamma', {\r\n      get: function(){ return valueGamma; },\r\n      enumerable: true\r\n    });\r\n\r\n    WebView.onEvent('device_orientation_started',  onDeviceOrientationStarted);\r\n    WebView.onEvent('device_orientation_stopped',  onDeviceOrientationStopped);\r\n    WebView.onEvent('device_orientation_changed', onDeviceOrientationChanged);\r\n    WebView.onEvent('device_orientation_failed',  onDeviceOrientationFailed);\r\n\r\n    function onDeviceOrientationStarted(eventType, eventData) {\r\n      isStarted = true;\r\n      if (startCallbacks.length > 0) {\r\n        for (var i = 0; i < startCallbacks.length; i++) {\r\n          var callback = startCallbacks[i];\r\n          callback(true);\r\n        }\r\n        startCallbacks = [];\r\n      }\r\n      receiveWebViewEvent('deviceOrientationStarted');\r\n    }\r\n    function onDeviceOrientationStopped(eventType, eventData) {\r\n      isStarted = false;\r\n      if (stopCallbacks.length > 0) {\r\n        for (var i = 0; i < stopCallbacks.length; i++) {\r\n          var callback = stopCallbacks[i];\r\n          callback(true);\r\n        }\r\n        stopCallbacks = [];\r\n      }\r\n      receiveWebViewEvent('deviceOrientationStopped');\r\n    }\r\n    function onDeviceOrientationChanged(eventType, eventData) {\r\n      valueAbsolute = !!eventData.absolute;\r\n      valueAlpha = eventData.alpha;\r\n      valueBeta  = eventData.beta;\r\n      valueGamma = eventData.gamma;\r\n      receiveWebViewEvent('deviceOrientationChanged');\r\n    }\r\n    function onDeviceOrientationFailed(eventType, eventData) {\r\n      if (startCallbacks.length > 0) {\r\n        for (var i = 0; i < startCallbacks.length; i++) {\r\n          var callback = startCallbacks[i];\r\n          callback(false);\r\n        }\r\n        startCallbacks = [];\r\n      }\r\n      receiveWebViewEvent('deviceOrientationFailed', {\r\n        error: eventData.error\r\n      });\r\n    }\r\n\r\n    function checkVersion() {\r\n      if (!versionAtLeast('8.0')) {\r\n        console.warn('[Telegram.WebApp] DeviceOrientation is not supported in version ' + webAppVersion);\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n\r\n    deviceOrientation.start = function(params, callback) {\r\n      params = params || {};\r\n      if (!checkVersion()) {\r\n        return deviceOrientation;\r\n      }\r\n      var req_params = {};\r\n      var refresh_rate = parseInt(params.refresh_rate || 1000);\r\n      if (isNaN(refresh_rate) || refresh_rate < 20 || refresh_rate > 1000) {\r\n        console.warn('[Telegram.WebApp] DeviceOrientation refresh_rate is invalid', refresh_rate);\r\n      } else {\r\n        req_params.refresh_rate = refresh_rate;\r\n      }\r\n      req_params.need_absolute = !!params.need_absolute;\r\n\r\n      if (callback) {\r\n        startCallbacks.push(callback);\r\n      }\r\n      WebView.postEvent('web_app_start_device_orientation', false, req_params);\r\n      return deviceOrientation;\r\n    };\r\n    deviceOrientation.stop = function(callback) {\r\n      if (!checkVersion()) {\r\n        return deviceOrientation;\r\n      }\r\n      if (callback) {\r\n        stopCallbacks.push(callback);\r\n      }\r\n      WebView.postEvent('web_app_stop_device_orientation');\r\n      return deviceOrientation;\r\n    };\r\n    return deviceOrientation;\r\n  })();\r\n\r\n  var Gyroscope = (function() {\r\n    var isStarted = false;\r\n    var valueX = null, valueY = null, valueZ = null;\r\n    var startCallbacks = [], stopCallbacks = [];\r\n\r\n    var gyroscope = {};\r\n    Object.defineProperty(gyroscope, 'isStarted', {\r\n      get: function(){ return isStarted; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(gyroscope, 'x', {\r\n      get: function(){ return valueX; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(gyroscope, 'y', {\r\n      get: function(){ return valueY; },\r\n      enumerable: true\r\n    });\r\n    Object.defineProperty(gyroscope, 'z', {\r\n      get: function(){ return valueZ; },\r\n      enumerable: true\r\n    });\r\n\r\n    WebView.onEvent('gyroscope_started',  onGyroscopeStarted);\r\n    WebView.onEvent('gyroscope_stopped',  onGyroscopeStopped);\r\n    WebView.onEvent('gyroscope_changed', onGyroscopeChanged);\r\n    WebView.onEvent('gyroscope_failed',  onGyroscopeFailed);\r\n\r\n    function onGyroscopeStarted(eventType, eventData) {\r\n      isStarted = true;\r\n      if (startCallbacks.length > 0) {\r\n        for (var i = 0; i < startCallbacks.length; i++) {\r\n          var callback = startCallbacks[i];\r\n          callback(true);\r\n        }\r\n        startCallbacks = [];\r\n      }\r\n      receiveWebViewEvent('gyroscopeStarted');\r\n    }\r\n    function onGyroscopeStopped(eventType, eventData) {\r\n      isStarted = false;\r\n      if (stopCallbacks.length > 0) {\r\n        for (var i = 0; i < stopCallbacks.length; i++) {\r\n          var callback = stopCallbacks[i];\r\n          callback(true);\r\n        }\r\n        stopCallbacks = [];\r\n      }\r\n      receiveWebViewEvent('gyroscopeStopped');\r\n    }\r\n    function onGyroscopeChanged(eventType, eventData) {\r\n      valueX = eventData.x;\r\n      valueY = eventData.y;\r\n      valueZ = eventData.z;\r\n      receiveWebViewEvent('gyroscopeChanged');\r\n    }\r\n    function onGyroscopeFailed(eventType, eventData) {\r\n      if (startCallbacks.length > 0) {\r\n        for (var i = 0; i < startCallbacks.length; i++) {\r\n          var callback = startCallbacks[i];\r\n          callback(false);\r\n        }\r\n        startCallbacks = [];\r\n      }\r\n      receiveWebViewEvent('gyroscopeFailed', {\r\n        error: eventData.error\r\n      });\r\n    }\r\n\r\n    function checkVersion() {\r\n      if (!versionAtLeast('8.0')) {\r\n        console.warn('[Telegram.WebApp] Gyroscope is not supported in version ' + webAppVersion);\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n\r\n    gyroscope.start = function(params, callback) {\r\n      params = params || {};\r\n      if (!checkVersion()) {\r\n        return gyroscope;\r\n      }\r\n      var req_params = {};\r\n      var refresh_rate = parseInt(params.refresh_rate || 1000);\r\n      if (isNaN(refresh_rate) || refresh_rate < 20 || refresh_rate > 1000) {\r\n        console.warn('[Telegram.WebApp] Gyroscope refresh_rate is invalid', refresh_rate);\r\n      } else {\r\n        req_params.refresh_rate = refresh_rate;\r\n      }\r\n\r\n      if (callback) {\r\n        startCallbacks.push(callback);\r\n      }\r\n      WebView.postEvent('web_app_start_gyroscope', false, req_params);\r\n      return gyroscope;\r\n    };\r\n    gyroscope.stop = function(callback) {\r\n      if (!checkVersion()) {\r\n        return gyroscope;\r\n      }\r\n      if (callback) {\r\n        stopCallbacks.push(callback);\r\n      }\r\n      WebView.postEvent('web_app_stop_gyroscope');\r\n      return gyroscope;\r\n    };\r\n    return gyroscope;\r\n  })();\r\n\r\n  var webAppInvoices = {};\r\n  function onInvoiceClosed(eventType, eventData) {\r\n    if (eventData.slug && webAppInvoices[eventData.slug]) {\r\n      var invoiceData = webAppInvoices[eventData.slug];\r\n      delete webAppInvoices[eventData.slug];\r\n      if (invoiceData.callback) {\r\n        invoiceData.callback(eventData.status);\r\n      }\r\n      receiveWebViewEvent('invoiceClosed', {\r\n        url: invoiceData.url,\r\n        status: eventData.status\r\n      });\r\n    }\r\n  }\r\n\r\n  var webAppPopupOpened = false;\r\n  function onPopupClosed(eventType, eventData) {\r\n    if (webAppPopupOpened) {\r\n      var popupData = webAppPopupOpened;\r\n      webAppPopupOpened = false;\r\n      var button_id = null;\r\n      if (typeof eventData.button_id !== 'undefined') {\r\n        button_id = eventData.button_id;\r\n      }\r\n      if (popupData.callback) {\r\n        popupData.callback(button_id);\r\n      }\r\n      receiveWebViewEvent('popupClosed', {\r\n        button_id: button_id\r\n      });\r\n    }\r\n  }\r\n\r\n  var webAppScanQrPopupOpened = false;\r\n  function onQrTextReceived(eventType, eventData) {\r\n    if (webAppScanQrPopupOpened) {\r\n      var popupData = webAppScanQrPopupOpened;\r\n      var data = null;\r\n      if (typeof eventData.data !== 'undefined') {\r\n        data = eventData.data;\r\n      }\r\n      if (popupData.callback) {\r\n        if (popupData.callback(data)) {\r\n          webAppScanQrPopupOpened = false;\r\n          WebView.postEvent('web_app_close_scan_qr_popup', false);\r\n        }\r\n      }\r\n      receiveWebViewEvent('qrTextReceived', {\r\n        data: data\r\n      });\r\n    }\r\n  }\r\n  function onScanQrPopupClosed(eventType, eventData) {\r\n    webAppScanQrPopupOpened = false;\r\n    receiveWebViewEvent('scanQrPopupClosed');\r\n  }\r\n\r\n  function onClipboardTextReceived(eventType, eventData) {\r\n    if (eventData.req_id && webAppCallbacks[eventData.req_id]) {\r\n      var requestData = webAppCallbacks[eventData.req_id];\r\n      delete webAppCallbacks[eventData.req_id];\r\n      var data = null;\r\n      if (typeof eventData.data !== 'undefined') {\r\n        data = eventData.data;\r\n      }\r\n      if (requestData.callback) {\r\n        requestData.callback(data);\r\n      }\r\n      receiveWebViewEvent('clipboardTextReceived', {\r\n        data: data\r\n      });\r\n    }\r\n  }\r\n\r\n  var WebAppWriteAccessRequested = false;\r\n  function onWriteAccessRequested(eventType, eventData) {\r\n    if (WebAppWriteAccessRequested) {\r\n      var requestData = WebAppWriteAccessRequested;\r\n      WebAppWriteAccessRequested = false;\r\n      if (requestData.callback) {\r\n        requestData.callback(eventData.status == 'allowed');\r\n      }\r\n      receiveWebViewEvent('writeAccessRequested', {\r\n        status: eventData.status\r\n      });\r\n    }\r\n  }\r\n\r\n  function getRequestedContact(callback, timeout) {\r\n    var reqTo, fallbackTo, reqDelay = 0;\r\n    var reqInvoke = function() {\r\n      invokeCustomMethod('getRequestedContact', {}, function(err, res) {\r\n        if (res && res.length) {\r\n          clearTimeout(fallbackTo);\r\n          callback(res);\r\n        } else {\r\n          reqDelay += 50;\r\n          reqTo = setTimeout(reqInvoke, reqDelay);\r\n        }\r\n      });\r\n    };\r\n    var fallbackInvoke = function() {\r\n      clearTimeout(reqTo);\r\n      callback('');\r\n    };\r\n    fallbackTo = setTimeout(fallbackInvoke, timeout);\r\n    reqInvoke();\r\n  }\r\n\r\n  var WebAppContactRequested = false;\r\n  function onPhoneRequested(eventType, eventData) {\r\n    if (WebAppContactRequested) {\r\n      var requestData = WebAppContactRequested;\r\n      WebAppContactRequested = false;\r\n      var requestSent = eventData.status == 'sent';\r\n      var webViewEvent = {\r\n        status: eventData.status\r\n      };\r\n      if (requestSent) {\r\n        getRequestedContact(function(res) {\r\n          if (res && res.length) {\r\n            webViewEvent.response = res;\r\n            webViewEvent.responseUnsafe = Utils.urlParseQueryString(res);\r\n            for (var key in webViewEvent.responseUnsafe) {\r\n              var val = webViewEvent.responseUnsafe[key];\r\n              try {\r\n                if (val.substr(0, 1) == '{' && val.substr(-1) == '}' ||\r\n                    val.substr(0, 1) == '[' && val.substr(-1) == ']') {\r\n                  webViewEvent.responseUnsafe[key] = JSON.parse(val);\r\n                }\r\n              } catch (e) {}\r\n            }\r\n          }\r\n          if (requestData.callback) {\r\n            requestData.callback(requestSent, webViewEvent);\r\n          }\r\n          receiveWebViewEvent('contactRequested', webViewEvent);\r\n        }, 3000);\r\n      } else {\r\n        if (requestData.callback) {\r\n          requestData.callback(requestSent, webViewEvent);\r\n        }\r\n        receiveWebViewEvent('contactRequested', webViewEvent);\r\n      }\r\n    }\r\n  }\r\n\r\n  var webAppDownloadFileRequested = false;\r\n  function onFileDownloadRequested(eventType, eventData) {\r\n    if (webAppDownloadFileRequested) {\r\n      var requestData = webAppDownloadFileRequested;\r\n      webAppDownloadFileRequested = false;\r\n      var isDownloading = eventData.status == 'downloading';\r\n      if (requestData.callback) {\r\n        requestData.callback(isDownloading);\r\n      }\r\n      receiveWebViewEvent('fileDownloadRequested', {\r\n        status: isDownloading ? 'downloading' : 'cancelled'\r\n      });\r\n    }\r\n  }\r\n\r\n  function onCustomMethodInvoked(eventType, eventData) {\r\n    if (eventData.req_id && webAppCallbacks[eventData.req_id]) {\r\n      var requestData = webAppCallbacks[eventData.req_id];\r\n      delete webAppCallbacks[eventData.req_id];\r\n      var res = null, err = null;\r\n      if (typeof eventData.result !== 'undefined') {\r\n        res = eventData.result;\r\n      }\r\n      if (typeof eventData.error !== 'undefined') {\r\n        err = eventData.error;\r\n      }\r\n      if (requestData.callback) {\r\n        requestData.callback(err, res);\r\n      }\r\n    }\r\n  }\r\n\r\n  function invokeCustomMethod(method, params, callback) {\r\n    if (!versionAtLeast('6.9')) {\r\n      console.error('[Telegram.WebApp] Method invokeCustomMethod is not supported in version ' + webAppVersion);\r\n      throw Error('WebAppMethodUnsupported');\r\n    }\r\n    var req_id = generateCallbackId(16);\r\n    var req_params = {req_id: req_id, method: method, params: params || {}};\r\n    webAppCallbacks[req_id] = {\r\n      callback: callback\r\n    };\r\n    WebView.postEvent('web_app_invoke_custom_method', false, req_params);\r\n  };\r\n\r\n  if (!window.Telegram) {\r\n    window.Telegram = {};\r\n  }\r\n\r\n  Object.defineProperty(WebApp, 'initData', {\r\n    get: function(){ return webAppInitData; },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'initDataUnsafe', {\r\n    get: function(){ return webAppInitDataUnsafe; },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'version', {\r\n    get: function(){ return webAppVersion; },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'platform', {\r\n    get: function(){ return webAppPlatform; },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'colorScheme', {\r\n    get: function(){ return colorScheme; },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'themeParams', {\r\n    get: function(){ return themeParams; },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'isExpanded', {\r\n    get: function(){ return isExpanded; },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'viewportHeight', {\r\n    get: function(){ return (viewportHeight === false ? window.innerHeight : viewportHeight) - bottomBarHeight; },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'viewportStableHeight', {\r\n    get: function(){ return (viewportStableHeight === false ? window.innerHeight : viewportStableHeight) - bottomBarHeight; },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'safeAreaInset', {\r\n    get: function(){ return safeAreaInset; },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'contentSafeAreaInset', {\r\n    get: function(){ return contentSafeAreaInset; },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'isClosingConfirmationEnabled', {\r\n    set: function(val){ setClosingConfirmation(val); },\r\n    get: function(){ return isClosingConfirmationEnabled; },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'isVerticalSwipesEnabled', {\r\n    set: function(val){ toggleVerticalSwipes(val); },\r\n    get: function(){ return isVerticalSwipesEnabled; },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'isFullscreen', {\r\n    get: function(){ return webAppIsFullscreen; },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'isOrientationLocked', {\r\n    set: function(val){ toggleOrientationLock(val); },\r\n    get: function(){ return webAppIsOrientationLocked; },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'isActive', {\r\n    get: function(){ return webAppIsActive; },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'headerColor', {\r\n    set: function(val){ setHeaderColor(val); },\r\n    get: function(){ return getHeaderColor(); },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'backgroundColor', {\r\n    set: function(val){ setBackgroundColor(val); },\r\n    get: function(){ return getBackgroundColor(); },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'bottomBarColor', {\r\n    set: function(val){ setBottomBarColor(val); },\r\n    get: function(){ return getBottomBarColor(); },\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'BackButton', {\r\n    value: BackButton,\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'MainButton', {\r\n    value: MainButton,\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'SecondaryButton', {\r\n    value: SecondaryButton,\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'SettingsButton', {\r\n    value: SettingsButton,\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'HapticFeedback', {\r\n    value: HapticFeedback,\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'CloudStorage', {\r\n    value: CloudStorage,\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'BiometricManager', {\r\n    value: BiometricManager,\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'Accelerometer', {\r\n    value: Accelerometer,\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'DeviceOrientation', {\r\n    value: DeviceOrientation,\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'Gyroscope', {\r\n    value: Gyroscope,\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(WebApp, 'LocationManager', {\r\n    value: LocationManager,\r\n    enumerable: true\r\n  });\r\n  WebApp.isVersionAtLeast = function(ver) {\r\n    return versionAtLeast(ver);\r\n  };\r\n  WebApp.setHeaderColor = function(color_key) {\r\n    WebApp.headerColor = color_key;\r\n  };\r\n  WebApp.setBackgroundColor = function(color) {\r\n    WebApp.backgroundColor = color;\r\n  };\r\n  WebApp.setBottomBarColor = function(color) {\r\n    WebApp.bottomBarColor = color;\r\n  };\r\n  WebApp.enableClosingConfirmation = function() {\r\n    WebApp.isClosingConfirmationEnabled = true;\r\n  };\r\n  WebApp.disableClosingConfirmation = function() {\r\n    WebApp.isClosingConfirmationEnabled = false;\r\n  };\r\n  WebApp.enableVerticalSwipes = function() {\r\n    WebApp.isVerticalSwipesEnabled = true;\r\n  };\r\n  WebApp.disableVerticalSwipes = function() {\r\n    WebApp.isVerticalSwipesEnabled = false;\r\n  };\r\n  WebApp.lockOrientation = function() {\r\n    WebApp.isOrientationLocked = true;\r\n  };\r\n  WebApp.unlockOrientation = function() {\r\n    WebApp.isOrientationLocked = false;\r\n  };\r\n  WebApp.requestFullscreen = function() {\r\n    if (!versionAtLeast('8.0')) {\r\n      console.error('[Telegram.WebApp] Method requestFullscreen is not supported in version ' + webAppVersion);\r\n      throw Error('WebAppMethodUnsupported');\r\n    }\r\n    WebView.postEvent('web_app_request_fullscreen');\r\n  };\r\n  WebApp.exitFullscreen = function() {\r\n    if (!versionAtLeast('8.0')) {\r\n      console.error('[Telegram.WebApp] Method exitFullscreen is not supported in version ' + webAppVersion);\r\n      throw Error('WebAppMethodUnsupported');\r\n    }\r\n    WebView.postEvent('web_app_exit_fullscreen');\r\n  };\r\n  WebApp.addToHomeScreen = function() {\r\n    if (!versionAtLeast('8.0')) {\r\n      console.error('[Telegram.WebApp] Method addToHomeScreen is not supported in version ' + webAppVersion);\r\n      throw Error('WebAppMethodUnsupported');\r\n    }\r\n    WebView.postEvent('web_app_add_to_home_screen');\r\n  };\r\n  WebApp.checkHomeScreenStatus = function(callback) {\r\n    if (!versionAtLeast('8.0')) {\r\n      console.error('[Telegram.WebApp] Method checkHomeScreenStatus is not supported in version ' + webAppVersion);\r\n      throw Error('WebAppMethodUnsupported');\r\n    }\r\n    if (callback) {\r\n      homeScreenCallbacks.push(callback);\r\n    }\r\n    WebView.postEvent('web_app_check_home_screen');\r\n  };\r\n  WebApp.onEvent = function(eventType, callback) {\r\n    onWebViewEvent(eventType, callback);\r\n  };\r\n  WebApp.offEvent = function(eventType, callback) {offWebViewEvent(eventType, callback);\r\n  };\r\n  WebApp.sendData = function (data) {\r\n    if (!data || !data.length) {\r\n      console.error('[Telegram.WebApp] Data is required', data);\r\n      throw Error('WebAppDataInvalid');\r\n    }\r\n    if (byteLength(data) > 4096) {\r\n      console.error('[Telegram.WebApp] Data is too long', data);\r\n      throw Error('WebAppDataInvalid');\r\n    }\r\n    WebView.postEvent('web_app_data_send', false, {data: data});\r\n  };\r\n  WebApp.switchInlineQuery = function (query, choose_chat_types) {\r\n    if (!versionAtLeast('6.6')) {\r\n      console.error('[Telegram.WebApp] Method switchInlineQuery is not supported in version ' + webAppVersion);\r\n      throw Error('WebAppMethodUnsupported');\r\n    }\r\n    if (!initParams.tgWebAppBotInline) {\r\n      console.error('[Telegram.WebApp] Inline mode is disabled for this bot. Read more about inline mode: https://core.telegram.org/bots/inline');\r\n      throw Error('WebAppInlineModeDisabled');\r\n    }\r\n    query = query || '';\r\n    if (query.length > 256) {\r\n      console.error('[Telegram.WebApp] Inline query is too long', query);\r\n      throw Error('WebAppInlineQueryInvalid');\r\n    }\r\n    var chat_types = [];\r\n    if (choose_chat_types) {\r\n      if (!Array.isArray(choose_chat_types)) {\r\n        console.error('[Telegram.WebApp] Choose chat types should be an array', choose_chat_types);\r\n        throw Error('WebAppInlineChooseChatTypesInvalid');\r\n      }\r\n      var good_types = {users: 1, bots: 1, groups: 1, channels: 1};\r\n      for (var i = 0; i < choose_chat_types.length; i++) {\r\n        var chat_type = choose_chat_types[i];\r\n        if (!good_types[chat_type]) {\r\n          console.error('[Telegram.WebApp] Choose chat type is invalid', chat_type);\r\n          throw Error('WebAppInlineChooseChatTypeInvalid');\r\n        }\r\n        if (good_types[chat_type] != 2) {\r\n          good_types[chat_type] = 2;\r\n          chat_types.push(chat_type);\r\n        }\r\n      }\r\n    }\r\n    WebView.postEvent('web_app_switch_inline_query', false, {query: query, chat_types: chat_types});\r\n  };\r\n  WebApp.openLink = function (url, options) {\r\n    var a = document.createElement('A');\r\n    a.href = url;\r\n    if (a.protocol != 'http:' &&\r\n        a.protocol != 'https:') {\r\n      console.error('[Telegram.WebApp] Url protocol is not supported', url);\r\n      throw Error('WebAppTgUrlInvalid');\r\n    }\r\n    var url = a.href;\r\n    options = options || {};\r\n    if (versionAtLeast('6.1')) {\r\n      var req_params = {url: url};\r\n      if (versionAtLeast('6.4') && options.try_instant_view) {\r\n        req_params.try_instant_view = true;\r\n      }\r\n      if (versionAtLeast('7.6') && options.try_browser) {\r\n        req_params.try_browser = options.try_browser;\r\n      }\r\n      WebView.postEvent('web_app_open_link', false, req_params);\r\n    } else {\r\n      window.open(url, '_blank');\r\n    }\r\n  };\r\n  WebApp.openTelegramLink = function (url, options) {\r\n    var a = document.createElement('A');\r\n    a.href = url;\r\n    if (a.protocol != 'http:' &&\r\n        a.protocol != 'https:') {\r\n      console.error('[Telegram.WebApp] Url protocol is not supported', url);\r\n      throw Error('WebAppTgUrlInvalid');\r\n    }\r\n    if (a.hostname != 't.me') {\r\n      console.error('[Telegram.WebApp] Url host is not supported', url);\r\n      throw Error('WebAppTgUrlInvalid');\r\n    }\r\n    var path_full = a.pathname + a.search;\r\n    options = options || {};\r\n    if (isIframe || versionAtLeast('6.1')) {\r\n      var req_params = {path_full: path_full};\r\n      if (options.force_request) {\r\n        req_params.force_request = true;\r\n      }\r\n      WebView.postEvent('web_app_open_tg_link', false, req_params);\r\n    } else {\r\n      location.href = 'https://t.me' + path_full;\r\n    }\r\n  };\r\n  WebApp.openInvoice = function (url, callback) {\r\n    var a = document.createElement('A'), match, slug;\r\n    a.href = url;\r\n    if (a.protocol != 'http:' &&\r\n        a.protocol != 'https:' ||\r\n        a.hostname != 't.me' ||\r\n        !(match = a.pathname.match(/^\\/(\\$|invoice\\/)([A-Za-z0-9\\-_=]+)$/)) ||\r\n        !(slug = match[2])) {\r\n      console.error('[Telegram.WebApp] Invoice url is invalid', url);\r\n      throw Error('WebAppInvoiceUrlInvalid');\r\n    }\r\n    if (!versionAtLeast('6.1')) {\r\n      console.error('[Telegram.WebApp] Method openInvoice is not supported in version ' + webAppVersion);\r\n      throw Error('WebAppMethodUnsupported');\r\n    }\r\n    if (webAppInvoices[slug]) {\r\n      console.error('[Telegram.WebApp] Invoice is already opened');\r\n      throw Error('WebAppInvoiceOpened');\r\n    }\r\n    webAppInvoices[slug] = {\r\n      url: url,\r\n      callback: callback\r\n    };\r\n    WebView.postEvent('web_app_open_invoice', false, {slug: slug});\r\n  };\r\n  WebApp.showPopup = function (params, callback) {\r\n    if (!versionAtLeast('6.2')) {\r\n      console.error('[Telegram.WebApp] Method showPopup is not supported in version ' + webAppVersion);\r\n      throw Error('WebAppMethodUnsupported');\r\n    }\r\n    if (webAppPopupOpened) {\r\n      console.error('[Telegram.WebApp] Popup is already opened');\r\n      throw Error('WebAppPopupOpened');\r\n    }\r\n    var title = '';\r\n    var message = '';\r\n    var buttons = [];\r\n    var popup_buttons = {};\r\n    var popup_params = {};\r\n    if (typeof params.title !== 'undefined') {\r\n      title = strTrim(params.title);\r\n      if (title.length > 64) {\r\n        console.error('[Telegram.WebApp] Popup title is too long', title);\r\n        throw Error('WebAppPopupParamInvalid');\r\n      }\r\n      if (title.length > 0) {\r\n        popup_params.title = title;\r\n      }\r\n    }\r\n    if (typeof params.message !== 'undefined') {\r\n      message = strTrim(params.message);\r\n    }\r\n    if (!message.length) {\r\n      console.error('[Telegram.WebApp] Popup message is required', params.message);\r\n      throw Error('WebAppPopupParamInvalid');\r\n    }\r\n    if (message.length > 256) {\r\n      console.error('[Telegram.WebApp] Popup message is too long', message);\r\n      throw Error('WebAppPopupParamInvalid');\r\n    }\r\n    popup_params.message = message;\r\n    if (typeof params.buttons !== 'undefined') {\r\n      if (!Array.isArray(params.buttons)) {\r\n        console.error('[Telegram.WebApp] Popup buttons should be an array', params.buttons);\r\n        throw Error('WebAppPopupParamInvalid');\r\n      }\r\n      for (var i = 0; i < params.buttons.length; i++) {\r\n        var button = params.buttons[i];\r\n        var btn = {};\r\n        var id = '';\r\n        if (typeof button.id !== 'undefined') {\r\n          id = button.id.toString();\r\n          if (id.length > 64) {\r\n            console.error('[Telegram.WebApp] Popup button id is too long', id);\r\n            throw Error('WebAppPopupParamInvalid');\r\n          }\r\n        }\r\n        btn.id = id;\r\n        var button_type = button.type;\r\n        if (typeof button_type === 'undefined') {\r\n          button_type = 'default';\r\n        }\r\n        btn.type = button_type;\r\n        if (button_type == 'ok' ||\r\n            button_type == 'close' ||\r\n            button_type == 'cancel') {\r\n          // no params needed\r\n        } else if (button_type == 'default' ||\r\n            button_type == 'destructive') {\r\n          var text = '';\r\n          if (typeof button.text !== 'undefined') {\r\n            text = strTrim(button.text);\r\n          }\r\n          if (!text.length) {\r\n            console.error('[Telegram.WebApp] Popup button text is required for type ' + button_type, button.text);\r\n            throw Error('WebAppPopupParamInvalid');\r\n          }\r\n          if (text.length > 64) {\r\n            console.error('[Telegram.WebApp] Popup button text is too long', text);\r\n            throw Error('WebAppPopupParamInvalid');\r\n          }\r\n          btn.text = text;\r\n        } else {\r\n          console.error('[Telegram.WebApp] Popup button type is invalid', button_type);\r\n          throw Error('WebAppPopupParamInvalid');\r\n        }\r\n        buttons.push(btn);\r\n      }\r\n    } else {\r\n      buttons.push({id: '', type: 'close'});\r\n    }\r\n    if (buttons.length < 1) {\r\n      console.error('[Telegram.WebApp] Popup should have at least one button');\r\n      throw Error('WebAppPopupParamInvalid');\r\n    }\r\n    if (buttons.length > 3) {\r\n      console.error('[Telegram.WebApp] Popup should not have more than 3 buttons');\r\n      throw Error('WebAppPopupParamInvalid');\r\n    }\r\n    popup_params.buttons = buttons;\r\n\r\n    webAppPopupOpened = {\r\n      callback: callback\r\n    };\r\n    WebView.postEvent('web_app_open_popup', false, popup_params);\r\n  };\r\n  WebApp.showAlert = function (message, callback) {\r\n    WebApp.showPopup({\r\n      message: message\r\n    }, callback ? function(){ callback(); } : null);\r\n  };\r\n  WebApp.showConfirm = function (message, callback) {\r\n    WebApp.showPopup({\r\n      message: message,\r\n      buttons: [\r\n        {type: 'ok', id: 'ok'},\r\n        {type: 'cancel'}\r\n      ]\r\n    }, callback ? function (button_id) {\r\n      callback(button_id == 'ok');\r\n    } : null);\r\n  };\r\n  WebApp.showScanQrPopup = function (params, callback) {\r\n    if (!versionAtLeast('6.4')) {\r\n      console.error('[Telegram.WebApp] Method showScanQrPopup is not supported in version ' + webAppVersion);\r\n      throw Error('WebAppMethodUnsupported');\r\n    }\r\n    if (webAppScanQrPopupOpened) {\r\n      console.error('[Telegram.WebApp] Popup is already opened');\r\n      throw Error('WebAppScanQrPopupOpened');\r\n    }\r\n    var text = '';\r\n    var popup_params = {};\r\n    if (typeof params.text !== 'undefined') {\r\n      text = strTrim(params.text);\r\n      if (text.length > 64) {\r\n        console.error('[Telegram.WebApp] Scan QR popup text is too long', text);\r\n        throw Error('WebAppScanQrPopupParamInvalid');\r\n      }\r\n      if (text.length > 0) {\r\n        popup_params.text = text;\r\n      }\r\n    }\r\n\r\n    webAppScanQrPopupOpened = {\r\n      callback: callback\r\n    };\r\n    WebView.postEvent('web_app_open_scan_qr_popup', false, popup_params);\r\n  };\r\n  WebApp.closeScanQrPopup = function () {\r\n    if (!versionAtLeast('6.4')) {\r\n      console.error('[Telegram.WebApp] Method closeScanQrPopup is not supported in version ' + webAppVersion);\r\n      throw Error('WebAppMethodUnsupported');\r\n    }\r\n\r\n    webAppScanQrPopupOpened = false;\r\n    WebView.postEvent('web_app_close_scan_qr_popup', false);\r\n  };\r\n  WebApp.readTextFromClipboard = function (callback) {\r\n    if (!versionAtLeast('6.4')) {\r\n      console.error('[Telegram.WebApp] Method readTextFromClipboard is not supported in version ' + webAppVersion);\r\n      throw Error('WebAppMethodUnsupported');\r\n    }\r\n    var req_id = generateCallbackId(16);\r\n    var req_params = {req_id: req_id};\r\n    webAppCallbacks[req_id] = {\r\n      callback: callback\r\n    };\r\n    WebView.postEvent('web_app_read_text_from_clipboard', false, req_params);\r\n  };\r\n  WebApp.requestWriteAccess = function (callback) {\r\n    if (!versionAtLeast('6.9')) {\r\n      console.error('[Telegram.WebApp] Method requestWriteAccess is not supported in version ' + webAppVersion);\r\n      throw Error('WebAppMethodUnsupported');\r\n    }\r\n    if (WebAppWriteAccessRequested) {\r\n      console.error('[Telegram.WebApp] Write access is already requested');\r\n      throw Error('WebAppWriteAccessRequested');\r\n    }\r\n    WebAppWriteAccessRequested = {\r\n      callback: callback\r\n    };\r\n    WebView.postEvent('web_app_request_write_access');\r\n  };\r\n  WebApp.requestContact = function (callback) {\r\n    if (!versionAtLeast('6.9')) {\r\n      console.error('[Telegram.WebApp] Method requestContact is not supported in version ' + webAppVersion);\r\n      throw Error('WebAppMethodUnsupported');\r\n    }\r\n    if (WebAppContactRequested) {\r\n      console.error('[Telegram.WebApp] Contact is already requested');\r\n      throw Error('WebAppContactRequested');\r\n    }\r\n    WebAppContactRequested = {\r\n      callback: callback\r\n    };\r\n    WebView.postEvent('web_app_request_phone');\r\n  };\r\n  WebApp.downloadFile = function (params, callback) {\r\n    if (!versionAtLeast('8.0')) {\r\n      console.error('[Telegram.WebApp] Method downloadFile is not supported in version ' + webAppVersion);\r\n      throw Error('WebAppMethodUnsupported');\r\n    }\r\n    if (webAppDownloadFileRequested) {\r\n      console.error('[Telegram.WebApp] Popup is already opened');\r\n      throw Error('WebAppDownloadFilePopupOpened');\r\n    }\r\n    var a = document.createElement('A');\r\n\r\n    var dl_params = {};\r\n    if (!params || !params.url || !params.url.length) {\r\n      console.error('[Telegram.WebApp] Url is required');\r\n      throw Error('WebAppDownloadFileParamInvalid');\r\n    }\r\n    a.href = params.url;\r\n    if (a.protocol != 'https:') {\r\n      console.error('[Telegram.WebApp] Url protocol is not supported', url);\r\n      throw Error('WebAppDownloadFileParamInvalid');\r\n    }\r\n    dl_params.url = a.href;\r\n\r\n    if (!params || !params.file_name || !params.file_name.length) {\r\n      console.error('[Telegram.WebApp] File name is required');\r\n      throw Error('WebAppDownloadFileParamInvalid');\r\n    }\r\n    dl_params.file_name = params.file_name;\r\n\r\n    webAppDownloadFileRequested = {\r\n      callback: callback\r\n    };\r\n    WebView.postEvent('web_app_request_file_download', false, dl_params);\r\n  };\r\n  WebApp.shareToStory = function (media_url, params) {\r\n    params = params || {};\r\n    if (!versionAtLeast('7.8')) {\r\n      console.error('[Telegram.WebApp] Method shareToStory is not supported in version ' + webAppVersion);\r\n      throw Error('WebAppMethodUnsupported');\r\n    }\r\n    var a = document.createElement('A');\r\n    a.href = media_url;\r\n    if (a.protocol != 'http:' &&\r\n        a.protocol != 'https:') {\r\n      console.error('[Telegram.WebApp] Media url protocol is not supported', url);\r\n      throw Error('WebAppMediaUrlInvalid');\r\n    }\r\n    var share_params = {};\r\n    share_params.media_url = a.href;\r\n    if (typeof params.text !== 'undefined') {\r\n      var text = strTrim(params.text);\r\n      if (text.length > 2048) {\r\n        console.error('[Telegram.WebApp] Text is too long', text);\r\n        throw Error('WebAppShareToStoryParamInvalid');\r\n      }\r\n      if (text.length > 0) {\r\n        share_params.text = text;\r\n      }\r\n    }\r\n    if (typeof params.widget_link !== 'undefined') {\r\n      params.widget_link = params.widget_link || {};\r\n      a.href = params.widget_link.url;\r\n      if (a.protocol != 'http:' &&\r\n          a.protocol != 'https:') {\r\n        console.error('[Telegram.WebApp] Link protocol is not supported', url);\r\n        throw Error('WebAppShareToStoryParamInvalid');\r\n      }\r\n      var widget_link = {\r\n        url: a.href\r\n      };\r\n      if (typeof params.widget_link.name !== 'undefined') {\r\n        var link_name = strTrim(params.widget_link.name);\r\n        if (link_name.length > 48) {\r\n          console.error('[Telegram.WebApp] Link name is too long', link_name);\r\n          throw Error('WebAppShareToStoryParamInvalid');\r\n        }\r\n        if (link_name.length > 0) {\r\n          widget_link.name = link_name;\r\n        }\r\n      }\r\n      share_params.widget_link = widget_link;\r\n    }\r\n\r\n    WebView.postEvent('web_app_share_to_story', false, share_params);\r\n  };\r\n  WebApp.shareMessage = function (msg_id, callback) {\r\n    if (!versionAtLeast('8.0')) {\r\n      console.error('[Telegram.WebApp] Method shareMessage is not supported in version ' + webAppVersion);\r\n      throw Error('WebAppMethodUnsupported');\r\n    }\r\n    if (WebAppShareMessageOpened) {\r\n      console.error('[Telegram.WebApp] Share message is already opened');\r\n      throw Error('WebAppShareMessageOpened');\r\n    }\r\n    WebAppShareMessageOpened = {\r\n      callback: callback\r\n    };\r\n    WebView.postEvent('web_app_send_prepared_message', false, {id: msg_id});\r\n  };\r\n  WebApp.setEmojiStatus = function (custom_emoji_id, params, callback) {\r\n    params = params || {};\r\n    if (!versionAtLeast('8.0')) {\r\n      console.error('[Telegram.WebApp] Method setEmojiStatus is not supported in version ' + webAppVersion);\r\n      throw Error('WebAppMethodUnsupported');\r\n    }\r\n    var status_params = {};\r\n    status_params.custom_emoji_id = custom_emoji_id;\r\n    if (typeof params.duration !== 'undefined') {\r\n      status_params.duration = params.duration;\r\n    }\r\n    if (WebAppEmojiStatusRequested) {\r\n      console.error('[Telegram.WebApp] Emoji status is already requested');\r\n      throw Error('WebAppEmojiStatusRequested');\r\n    }\r\n    WebAppEmojiStatusRequested = {\r\n      callback: callback\r\n    };\r\n    WebView.postEvent('web_app_set_emoji_status', false, status_params);\r\n  };\r\n  WebApp.requestEmojiStatusAccess = function (callback) {\r\n    if (!versionAtLeast('8.0')) {\r\n      console.error('[Telegram.WebApp] Method requestEmojiStatusAccess is not supported in version ' + webAppVersion);\r\n      throw Error('WebAppMethodUnsupported');\r\n    }\r\n    if (WebAppEmojiStatusAccessRequested) {\r\n      console.error('[Telegram.WebApp] Emoji status permission is already requested');\r\n      throw Error('WebAppEmojiStatusAccessRequested');\r\n    }\r\n    WebAppEmojiStatusAccessRequested = {\r\n      callback: callback\r\n    };\r\n    WebView.postEvent('web_app_request_emoji_status_access');\r\n  };\r\n  WebApp.invokeCustomMethod = function (method, params, callback) {\r\n    invokeCustomMethod(method, params, callback);\r\n  };\r\n  WebApp.ready = function () {\r\n    WebView.postEvent('web_app_ready');\r\n  };\r\n  WebApp.expand = function () {\r\n    WebView.postEvent('web_app_expand');\r\n  };\r\n  WebApp.close = function (options) {\r\n    options = options || {};\r\n    var req_params = {};\r\n    if (versionAtLeast('7.6') && options.return_back) {\r\n      req_params.return_back = true;\r\n    }\r\n    WebView.postEvent('web_app_close', false, req_params);\r\n  };\r\n\r\n  window.Telegram.WebApp = WebApp;\r\n\r\n  updateHeaderColor();\r\n  updateBackgroundColor();\r\n  updateBottomBarColor();\r\n  setViewportHeight();\r\n  if (initParams.tgWebAppShowSettings) {\r\n    SettingsButton.show();\r\n  }\r\n\r\n  window.addEventListener('resize', onWindowResize);\r\n  if (isIframe) {\r\n    document.addEventListener('click', linkHandler);\r\n  }\r\n\r\n  WebView.onEvent('theme_changed', onThemeChanged);\r\n  WebView.onEvent('viewport_changed', onViewportChanged);\r\n  WebView.onEvent('safe_area_changed', onSafeAreaChanged);\r\n  WebView.onEvent('content_safe_area_changed', onContentSafeAreaChanged);\r\n  WebView.onEvent('visibility_changed', onVisibilityChanged);\r\n  WebView.onEvent('invoice_closed', onInvoiceClosed);\r\n  WebView.onEvent('popup_closed', onPopupClosed);\r\n  WebView.onEvent('qr_text_received', onQrTextReceived);\r\n  WebView.onEvent('scan_qr_popup_closed', onScanQrPopupClosed);\r\n  WebView.onEvent('clipboard_text_received', onClipboardTextReceived);\r\n  WebView.onEvent('write_access_requested', onWriteAccessRequested);\r\n  WebView.onEvent('phone_requested', onPhoneRequested);\r\n  WebView.onEvent('file_download_requested', onFileDownloadRequested);\r\n  WebView.onEvent('custom_method_invoked', onCustomMethodInvoked);\r\n  WebView.onEvent('fullscreen_changed', onFullscreenChanged);\r\n  WebView.onEvent('fullscreen_failed', onFullscreenFailed);\r\n  WebView.onEvent('home_screen_added', onHomeScreenAdded);\r\n  WebView.onEvent('home_screen_checked', onHomeScreenChecked);\r\n  WebView.onEvent('prepared_message_sent', onPreparedMessageSent);\r\n  WebView.onEvent('prepared_message_failed', onPreparedMessageFailed);\r\n  WebView.onEvent('emoji_status_set', onEmojiStatusSet);\r\n  WebView.onEvent('emoji_status_failed', onEmojiStatusFailed);\r\n  WebView.onEvent('emoji_status_access_requested', onEmojiStatusAccessRequested);\r\n  WebView.postEvent('web_app_request_theme');\r\n  WebView.postEvent('web_app_request_viewport');\r\n  WebView.postEvent('web_app_request_safe_area');\r\n  WebView.postEvent('web_app_request_content_safe_area');\r\n\r\n})();", "import \"./telegram-web-apps\";\r\nimport { Telegram, WebApp as WebAppTypes } from \"@twa-dev/types\";\r\n\r\nconst telegramWindow = window as unknown as Window & { Telegram: Telegram };\r\n\r\nexport const WebApp: WebAppTypes = telegramWindow.Telegram.WebApp;\r\n", "import { WebApp } from \"./sdk\";\r\n\r\nexport default WebApp;\r\n"],
  "mappings": "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",
  "names": ["locationHash", "url", "key", "theme_params", "def_colors", "val", "k"]
}
